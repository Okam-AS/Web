(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{591:function(t,e,o){var content=o(788);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(120).default)("4ab4ef0e",content,!0,{sourceMap:!1})},787:function(t,e,o){"use strict";o(591)},788:function(t,e,o){var n=o(119)((function(i){return i[1]}));n.push([t.i,'.product-conf[data-v-3959693d]{padding-bottom:4.625rem}.product-conf .product-group[data-v-3959693d]{background-color:#f2f4fb;margin-bottom:.25rem;padding:1.5rem}.product-conf .product-group__header[data-v-3959693d]{display:flex;justify-content:space-between}.product-conf .product-group__heading[data-v-3959693d]{font-size:1rem}.product-conf .product-group__status[data-v-3959693d]{font-size:.75rem}.product-conf-summary[data-v-3959693d]{-moz-column-gap:1.5rem;column-gap:1.5rem;display:flex;justify-content:space-between;padding:1rem 1.5rem}.product-conf-summary__text[data-v-3959693d]{font-size:.875rem}.product-conf-summary__price[data-v-3959693d]{font-weight:700;white-space:nowrap}.product-conf .product-option[data-v-3959693d]{align-items:flex-start;cursor:pointer;display:flex;font-size:.875rem;padding:.5rem 0}.product-conf .product-option__checkbox[data-v-3959693d],.product-conf .product-option__radio[data-v-3959693d]{background-color:#fff;border:1px solid #000;display:block;flex-shrink:0;height:1.5rem;margin-right:.5rem;position:relative;width:1.5rem}.product-conf .product-option__radio[data-v-3959693d]{border-radius:50%}.product-conf .product-option__text[data-v-3959693d]{padding-top:.1875rem}.product-conf .product-option__price[data-v-3959693d]{color:gray;font-size:12px;padding-left:.3125rem;padding-top:.3125rem}.product-conf .product-option.is-selected .product-option__checkbox[data-v-3959693d]:before,.product-conf .product-option.is-selected .product-option__radio[data-v-3959693d]:before{background-color:#000;content:"";height:.875rem;left:.25rem;position:absolute;top:.25rem;width:.875rem}.product-conf .product-option.is-selected .product-option__radio[data-v-3959693d]:before{border-radius:50%}',""]),n.locals={},t.exports=n},870:function(t,e,o){"use strict";o.r(e);o(27),o(57),o(61),o(50),o(97),o(13),o(33),o(41),o(29),o(34),o(68);var n={components:{Stepper:o(808).default},props:{lineItem:{type:Object,default:function(){}}},data:function(){return{isLoading:!1,errorMessage:"",localLineItem:{quantity:1,product:{productVariants:[]}}}},computed:{saveBtnText:function(){return 0===this.localLineItem.quantity||this.localLineItem.product.soldOut&&this.localLineItem.id?"Fjern fra bestillingen":this.localLineItem.id?"Oppdater":"Legg til bestillingen"},saveEnabled:function(){var t=this.isLoading||this.$store.state.cartIsLoading,e=this.localLineItem.product.soldOut&&!this.lineItem.id;return!t&&!e},selectedOptionNames:function(){return this.selectedOptions.map((function(t){return t.name})).join(", ")},selectedOptionsAmount:function(){var t=0;return this.selectedOptions.forEach((function(option){t+=option.amount*(option.negativeAmount?-1:1)})),t},selectedOptions:function(){var t=[];return(this.localLineItem.product.productVariants||[]).forEach((function(e){e.options.filter((function(t){return t.selected})).forEach((function(option){t.push(option)}))})),t},totalAmount:function(){var t=(this.localLineItem.product.baseAmount||0)+this.selectedOptionsAmount-this.localLineItem.product.discountAmount;return(t<=0?this.localLineItem.product.amount:t)*(this.localLineItem.quantity?this.localLineItem.quantity:1)}},mounted:function(){this.localLineItem=JSON.parse(JSON.stringify(this.lineItem))},methods:{createGuid:function(){var t=function(s){var p=(Math.random().toString(16)+"000000000").substr(2,8);return s?"-"+p.substr(0,4)+"-"+p.substr(4,4):p};return t()+t(!0)+t(!0)+t()},optionClick:function(t){(this.localLineItem.product.productVariants||[]).forEach((function(e){e.options.find((function(e){return e.id===t}))&&e.options.forEach((function(option){e.multiselect||option.id===t||(option.selected=!1),option.id===t&&(option.selected=!option.selected)}))}))},valid:function(){var t=this;return this.errorMessage="",!(0!==this.localLineItem.quantity&&!this.localLineItem.product.soldOut)||((this.localLineItem.product.productVariants||[]).forEach((function(e){if(e.options&&e.required&&0===(e.options.filter((function(option){return option.selected}))||[]).length)return t.errorMessage="Velg '"+e.name+"' for å legge vare i handlevogn",!0})),!this.errorMessage)},addQuantity:function(t){var e=this.localLineItem.quantity+t;e<0||this.localLineItem.product.soldOut&&t>0||(this.localLineItem.quantity=e)},saveAndClose:function(){if(this.saveEnabled&&this.valid()){if(!this.localLineItem.id){if(0===this.localLineItem.quantity)return;this.localLineItem.id=this.createGuid()}this.localLineItem.product.selectedOptionNames=this.selectedOptionNames,this.localLineItem.product.selectedOptionsAmount=this.selectedOptionsAmount,this.localLineItem.product.amount=this.localLineItem.product.baseAmount+this.selectedOptionsAmount,this.localLineItem.product.soldOut&&(this.localLineItem.quantity=0),0===this.localLineItem.quantity?this._cartService.RemoveLineItem({storeId:this.localLineItem.product.storeId,lineItem:this.localLineItem}):this._cartService.SetLineItem({storeId:this.localLineItem.product.storeId,lineItem:JSON.parse(JSON.stringify(this.localLineItem))}),this.$emit("close")}}}},r=(o(787),o(78)),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-conf"},[t.errorMessage?e("div",{staticClass:"message-box"},[e("div",[t._v("\n      "+t._s(t.errorMessage)+"\n    ")]),t._v(" "),e("div",[e("span",{staticClass:"message-box__close material-icons",on:{click:function(e){t.errorMessage=""}}},[t._v("close")])])]):t._e(),t._v(" "),t._l(t.localLineItem.product.productVariants,(function(o,i){return e("div",{key:i,class:"product-group"+(o.required?" required":"")},[e("div",{staticClass:"product-group__header"},[e("h3",{staticClass:"product-group__heading"},[t._v("\n        "+t._s(o.name)+"\n      ")]),t._v(" "),e("div",{staticClass:"product-group__status"},[t._v("\n        "+t._s(o.required?"Påkrevd":"Valgfritt")+"\n      ")])]),t._v(" "),e("div",t._l(o.options,(function(option,n){return e("div",{key:n,class:{"product-option":!0,"is-selected":t.selectedOptions.map((function(t){return t.id})).includes(option.id)},attrs:{role:"checkbox",tabindex:"0","aria-selected":t.selectedOptions.map((function(t){return t.id})).includes(option.id)},on:{click:function(e){return t.optionClick(option.id)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.optionClick(option.id)}}},[e("span",{class:o.multiselect?"product-option__checkbox":"product-option__radio"}),t._v(" "),e("span",{staticClass:"product-option__text"},[t._v(t._s(option.name))]),t._v(" "),option.amount>0?e("span",{staticClass:"product-option__price"},[t._v(t._s((option.negativeAmount?"-":"+")+t.priceLabel(option.amount,!0)))]):t._e()])})),0)])})),t._v(" "),e("div",{staticClass:"product-group"},[t._m(0),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.localLineItem.notes,expression:"localLineItem.notes"}],staticClass:"input",attrs:{maxlength:"100",rows:"3",placeholder:"Andre spesielle ønsker?"},domProps:{value:t.localLineItem.notes},on:{input:function(e){e.target.composing||t.$set(t.localLineItem,"notes",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"product-conf-summary"},[e("span",{staticClass:"product-conf-summary__text"},[t._v(t._s(t.selectedOptionNames))]),t._v(" "),e("span",{staticClass:"product-conf-summary__price"},[t._v("\n      "+t._s(t.priceLabel(t.totalAmount))+"\n    ")])]),t._v(" "),e("div",{staticClass:"btn-row btn-row--modal btn-row--space-between"},[e("Stepper",{attrs:{quantity:t.localLineItem.quantity},on:{add:function(e){return t.addQuantity(1)},subtract:function(e){return t.addQuantity(-1)}}}),t._v(" "),e("button",{staticClass:"btn btn--primary",on:{click:t.saveAndClose}},[t._v("\n      "+t._s(t.saveBtnText)+"\n    ")])],1)],2)}),[function(){var t=this._self._c;return t("div",{staticClass:"product-group__header"},[t("h3",{staticClass:"product-group__heading"},[this._v("\n        Kommentar\n      ")])])}],!1,null,"3959693d",null);e.default=component.exports}}]);