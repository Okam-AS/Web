(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{568:function(t,e,o){var content=o(737);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(120).default)("bfdba424",content,!0,{sourceMap:!1})},736:function(t,e,o){"use strict";o(568)},737:function(t,e,o){var r=o(119)((function(i){return i[1]}));r.push([t.i,'.onboarding-container[data-v-14a43684]{margin:0 auto;max-width:1200px;padding:2rem}.store-selector[data-v-14a43684]{margin-bottom:2rem;text-align:center}.store-selector .select-wrapper[data-v-14a43684]{display:inline-block;position:relative}.store-selector .select-wrapper select[data-v-14a43684]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#292c34;border:1px solid #444;border-radius:4px;color:#fff;cursor:pointer;font-size:1.2rem;min-width:250px;padding:.75rem 2rem .75rem 1rem}.store-selector .select-wrapper select[data-v-14a43684]:focus{border-color:#d5f6e5;outline:none}.store-selector .select-wrapper[data-v-14a43684]:after{color:#d5f6e5;content:"â–¼";font-size:.8rem;pointer-events:none;position:absolute;right:1rem;top:50%;transform:translateY(-50%)}.store-selector .store-name h2[data-v-14a43684]{color:#292c34;font-size:1.5rem;font-weight:600;margin:0;padding:.5rem 0}.progress-indicator[data-v-14a43684]{margin-bottom:2rem}.progress-steps[data-v-14a43684]{justify-content:space-between;margin-bottom:1rem}.progress-steps[data-v-14a43684],.step[data-v-14a43684]{display:flex;position:relative}.step[data-v-14a43684]{align-items:center;cursor:pointer;flex:1;flex-direction:column}.step.active .step-number[data-v-14a43684]{background-color:#292c34;color:#d5f6e5}.step.active .step-label[data-v-14a43684]{color:#292c34;font-weight:600}.step.completed .step-number[data-v-14a43684]{background-color:#292c34;color:#d5f6e5}.step.completed .step-connector[data-v-14a43684]{background-color:#292c34}.step:hover .step-number[data-v-14a43684]{box-shadow:0 2px 4px rgba(0,0,0,.1);transform:scale(1.05)}.step:hover .step-label[data-v-14a43684]{color:#292c34}.step-number[data-v-14a43684]{align-items:center;background-color:#e2e8f0;border-radius:50%;color:#64748b;display:flex;font-weight:600;height:30px;justify-content:center;margin-right:.5rem;position:relative;width:30px;z-index:2}.step-number .checkmark[data-v-14a43684]{color:#fff;font-size:14px;font-weight:700}.step-label[data-v-14a43684]{color:#64748b;font-size:14px;text-align:center}.step-connector[data-v-14a43684]{background-color:#e2e8f0;height:2px;position:absolute;right:calc(-50% + 16px);top:16px;width:calc(100% - 32px);z-index:1}.step-content[data-v-14a43684]{background-color:#fff;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.05);padding:1.5rem}.step-title[data-v-14a43684]{color:#292c34;font-size:1.5rem;font-weight:600;margin-bottom:1.5rem}.step-body[data-v-14a43684]{margin-bottom:1.5rem;min-height:250px}.step-navigation[data-v-14a43684]{display:flex;justify-content:space-between;margin-top:1.5rem}.step-navigation button[data-v-14a43684]{border:1px solid transparent;border-radius:.375rem;cursor:pointer;font-weight:500;padding:.75rem 1.5rem;transition:all .2s}.step-navigation button.btn-primary[data-v-14a43684]{background-color:#292c34;color:#d5f6e5}.step-navigation button.btn-primary[data-v-14a43684]:hover{background-color:#1e2026}.step-navigation button.btn-primary[data-v-14a43684]:disabled{background-color:#a0aec0;cursor:not-allowed}.step-navigation button.btn-secondary[data-v-14a43684]{background-color:#f8f9fa;border-color:#e2e8f0;color:#292c34}.step-navigation button.btn-secondary[data-v-14a43684]:hover{background-color:#f0f2f5}.step-navigation button.btn-large[data-v-14a43684]{font-size:1.25rem;padding:1.25rem 2.5rem}.publish-button-container[data-v-14a43684]{display:flex;justify-content:center;margin:1rem}.publish-explanation[data-v-14a43684]{color:#64748b;margin:1rem;text-align:center}.final-step-container[data-v-14a43684]{align-items:center;background-color:#f8f9fa;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.05);display:flex;flex-direction:column;padding:2rem}.publish-btn[data-v-14a43684]{background-color:#292c34;border-radius:.375rem;color:#d5f6e5;cursor:pointer;font-size:1.25rem;padding:1.25rem 2.5rem;transition:all .2s}.publish-btn[data-v-14a43684]:hover{background-color:#1e2026}.approved-store-container[data-v-14a43684]{align-items:center;background-color:#fff;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.05);display:flex;flex-direction:column;justify-content:center;padding:4rem 2rem;text-align:center}.approved-store-container h1[data-v-14a43684]{color:#292c34;font-size:2.5rem;margin-bottom:2rem}.approved-store-container .shop-url[data-v-14a43684]{border:2px solid #292c34;border-radius:8px;color:#292c34;display:inline-block;font-size:1.2rem;margin:20px 0;padding:12px 20px;-webkit-text-decoration:none;text-decoration:none;-webkit-text-decoration:underline;text-decoration:underline;transition:all .3s ease}.approved-store-container .shop-url[data-v-14a43684]:hover{background-color:#292c34;box-shadow:0 4px 8px rgba(0,0,0,.1);color:#fff;transform:translateY(-2px)}.publishing-container[data-v-14a43684]{align-items:center;display:flex;justify-content:center;min-height:250px}.spinner[data-v-14a43684]{animation:spin-14a43684 1s linear infinite;border:6px solid #f3f3f3;border-radius:50%;border-top-color:#292c34;height:60px;width:60px}@keyframes spin-14a43684{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.loading-cursor[data-v-14a43684]{cursor:wait}.onboarding-title[data-v-14a43684]{margin-bottom:5rem;position:relative;text-align:center}.onboarding-title h1[data-v-14a43684]{color:#292c34;font-size:2rem;font-weight:600;margin:0;padding:0}.onboarding-title .store-name-dropdown[data-v-14a43684]{border-bottom:2px dotted #292c34;cursor:pointer;padding-bottom:2px;transition:all .2s ease}.onboarding-title .store-name-dropdown[data-v-14a43684]:hover{color:#4a5568}.onboarding-title .store-name-dropdown .dropdown-arrow[data-v-14a43684]{font-size:.8rem;margin-left:4px;vertical-align:middle}.onboarding-title .store-dropdown-menu[data-v-14a43684]{background-color:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);left:50%;margin-top:8px;min-width:200px;padding:8px 0;position:absolute;top:100%;transform:translateX(-50%);width:auto;z-index:10}.onboarding-title .store-dropdown-menu .store-dropdown-item[data-v-14a43684]{cursor:pointer;padding:10px 16px;text-align:left;transition:background-color .2s ease}.onboarding-title .store-dropdown-menu .store-dropdown-item[data-v-14a43684]:hover{background-color:#f7fafc}.onboarding-title .store-dropdown-menu .store-dropdown-item.active[data-v-14a43684]{background-color:#f0f2f5;color:#292c34;font-weight:500}',""]),r.locals={},t.exports=r},841:function(t,e,o){"use strict";o.r(e);o(27),o(50),o(41),o(13),o(29),o(57),o(61);var r=o(494),n=o(596),d=o(597),c=o(598),l=o(497),m={components:{AdminPage:r.default,OnboardingLogoUpload:n.default,OnboardingAIImport:d.default,OnboardingProductImages:c.default,LoginModal:l.default},data:function(){return{currentStep:0,steps:[{label:"Logo",title:"Last opp butikklogo"},{label:"Meny",title:"Importer meny"},{label:"Bilder",title:"Last opp produktbilder"},{label:"Publiser",title:"Publiser butikk"}],storeId:null,storeName:"butikk",storeApproved:!1,storeSlug:"",isPublishing:!1,hasLogo:!1,hasProducts:!1,productCount:0,productsWithImages:[],importStats:{created:0,deleted:0},showLogin:!1,isLoading:!0,showStoreSelector:!1}},computed:{storeSelectorAvailable:function(){return"butikk"!==this.storeName&&this.$store.state.currentUser&&this.$store.state.currentUser.adminIn&&this.$store.state.currentUser.adminIn.length>1}},watch:{storeId:function(t){t&&(this.hasLogo=!1,this.loadStoreData())}},mounted:function(){var t=this;if(!this.$store.getters.userIsLoggedIn)return this.showLogin=!0,void(this.isLoading=!1);this._userService.Reload().then((function(e){if(console.log("User data reloaded:",e),!e)return t.showLogin=!0,void(t.isLoading=!1);if(t.$store.state.currentUser&&t.$store.state.currentUser.adminIn){var o=localStorage.getItem("onboardingInProgress");if(o)try{var data=JSON.parse(o);t.$store.state.currentUser.adminIn.some((function(t){return t.id===data.storeId}))&&(t.storeId=data.storeId,void 0!==data.currentStep&&data.currentStep>=0&&data.currentStep<t.steps.length&&(t.currentStep=data.currentStep))}catch(t){localStorage.removeItem("onboardingInProgress")}if(!t.storeId){var r=t.$store.state.currentUser.adminIn;t.storeId=r[r.length-1].id}t.loadStoreData(),t.saveOnboardingState()}else t.isLoading=!1})).catch((function(e){console.error("Error fetching user data:",e),t.showLogin=!0,t.isLoading=!1}))},methods:{nextStep:function(){this.currentStep<this.steps.length-1&&(this.currentStep++,this.saveOnboardingState())},prevStep:function(){this.currentStep>0&&(this.currentStep--,this.saveOnboardingState())},goToStep:function(t){t>=0&&t<this.steps.length&&(this.currentStep=t,this.saveOnboardingState())},publishStore:function(){var t=this;this.isPublishing=!0,this._storeService.Publish(this.storeId,{publish:!0}).then((function(){localStorage.removeItem("onboardingInProgress"),t.loadStoreData()})).catch((function(e){t.isPublishing=!1,alert(e)}))},logoUpdated:function(){},handleProductsImported:function(t){},handleImportCompleted:function(t){this.hasProducts=!0,this.importStats=t},handleGoToNextStep:function(){this.nextStep(),document.querySelector(".step-content").scrollIntoView({behavior:"smooth"})},handleProductsLoaded:function(t){this.productCount=t,this.hasProducts=t>0},handleImageUploaded:function(t){this.productsWithImages.includes(t)||this.productsWithImages.push(t),this.$emit("product-image-uploaded",{productId:t,count:this.productsWithImages.length,total:this.productCount})},loadStoreData:function(){var t=this;this._storeService.Get(this.storeId).then((function(e){t.hasLogo=!!e.logoUrl,t.storeName=e.name,t.storeApproved=e.approved,t.storeSlug=e.slug,t.saveOnboardingState(),t.isLoading=!1,t.isPublishing=!1})).catch((function(e){alert("Feil ved lasting av butikkdata. Vennligst prÃ¸v igjen."),t.isLoading=!1,t.isPublishing=!1}))},saveOnboardingState:function(){if(this.isLoading=!1,this.storeId&&!this.storeApproved){var t={storeId:this.storeId,storeName:this.storeName,currentStep:this.currentStep,timestamp:(new Date).getTime()};localStorage.setItem("onboardingInProgress",JSON.stringify(t))}else localStorage.removeItem("onboardingInProgress")},closeLoginModal:function(t){this.showLogin=!t,t&&window.location.reload()},toggleStoreSelector:function(){this.showStoreSelector=!this.showStoreSelector},selectStore:function(t){this.storeId=t,this.loadStoreData(),this.showStoreSelector=!1}}},h=(o(736),o(78)),component=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("div",{class:{"loading-cursor":t.isLoading}},[e("AdminPage",[t.isLoading?e("div",{staticClass:"publishing-container"},[e("div",{staticClass:"spinner"})]):e("div",{staticClass:"onboarding-container"},[e("div",{staticClass:"onboarding-title"},[t.storeName?e("h1",[t._v("\n          Oppsett av\n          "),t.storeSelectorAvailable?e("span",{staticClass:"store-name-dropdown",on:{click:t.toggleStoreSelector}},[t._v("\n            "+t._s(t.storeName)+" "),e("span",{staticClass:"dropdown-arrow"},[t._v("â–¼")])]):e("span",[t._v(t._s(t.storeName))])]):t._e(),t._v(" "),t.showStoreSelector&&t.$store.state.currentUser&&t.$store.state.currentUser.adminIn&&(t.$store.state.currentUser.adminIn.length>1||t.$store.state.currentUser.isKeyAccountManager)?e("div",{staticClass:"store-dropdown-menu"},t._l(t.$store.state.currentUser.adminIn,(function(o){return e("div",{key:o.id,staticClass:"store-dropdown-item",class:{active:t.storeId===o.id},on:{click:function(e){return t.selectStore(o.id)}}},[t._v("\n            "+t._s(o.name)+"\n          ")])})),0):t._e()]),t._v(" "),t._e(),t._v(" "),t.storeApproved?t._e():e("div",{staticClass:"progress-indicator"},[e("div",{staticClass:"progress-steps"},t._l(t.steps,(function(o,r){return e("div",{key:r,class:{step:!0,active:t.currentStep>=r,completed:t.currentStep>r},on:{click:function(e){return t.goToStep(r)}}},[e("div",{staticClass:"step-number"},[t.currentStep>r?[e("span",{staticClass:"checkmark"},[t._v("âœ“")])]:[t._v("\n                "+t._s(r+1)+"\n              ")]],2),t._v(" "),e("div",{staticClass:"step-label"},[t._v("\n              "+t._s(o.label)+"\n            ")]),t._v(" "),r<t.steps.length-1?e("div",{staticClass:"step-connector"}):t._e()])})),0)]),t._v(" "),t.storeApproved?e("div",{staticClass:"approved-store-container"},[e("h1",[t._v(t._s(t.storeName)+" er publisert!")]),t._v(" "),e("a",{staticClass:"shop-url",attrs:{href:"https://shop.okam.no/store/".concat(t.storeSlug),target:"_blank"}},[t._v("\n          https://shop.okam.no/store/"+t._s(t.storeSlug)+"\n        ")])]):e("div",{staticClass:"step-content"},[e("h1",{staticClass:"step-title"},[t._v("\n          "+t._s(t.steps[t.currentStep].title)+"\n        ")]),t._v(" "),0===t.currentStep?e("div",{staticClass:"step-body"},[e("OnboardingLogoUpload",{attrs:{"store-id":t.storeId},on:{"has-logo":function(e){t.hasLogo=e},"logo-updated":t.logoUpdated}})],1):1===t.currentStep?e("div",{staticClass:"step-body"},[e("OnboardingAIImport",{attrs:{"store-id":t.storeId,"store-name":t.storeName},on:{"products-imported":t.handleProductsImported,"import-completed":t.handleImportCompleted,"go-to-next-step":t.handleGoToNextStep,loading:function(e){t.isLoading=e}}})],1):2===t.currentStep?e("div",{staticClass:"step-body"},[e("OnboardingProductImages",{attrs:{"store-id":t.storeId},on:{"products-loaded":t.handleProductsLoaded,"image-uploaded":t.handleImageUploaded}})],1):3===t.currentStep?e("div",{staticClass:"step-body"},[t.isPublishing?e("div",{staticClass:"publishing-container"},[e("div",{staticClass:"spinner"})]):e("div",{staticClass:"final-step-container"},[e("div",{staticClass:"publish-explanation"},[e("p",[t._v("Ved Ã¥ klikke pÃ¥ knappen nedenfor, vil butikken din bli publisert og tilgjengelig for kunder. Du kan fortsatt gjÃ¸re endringer i butikken din etter publisering.")])]),t._v(" "),e("div",{staticClass:"publish-button-container"},[e("button",{staticClass:"btn publish-btn",on:{click:t.publishStore}},[t._v("\n                Publiser "+t._s(t.storeName)+"\n              ")])])])]):t._e(),t._v(" "),1!==t.currentStep?e("div",{staticClass:"step-navigation"},[e("div",[t.currentStep>0?e("button",{staticClass:"btn btn-secondary",on:{click:t.prevStep}},[t._v("\n              Tilbake\n            ")]):t._e()]),t._v(" "),e("div",[t.currentStep<t.steps.length-1?e("button",{staticClass:"btn btn-primary",on:{click:t.nextStep}},[t._v("\n              Fortsett\n            ")]):t._e()])]):t._e()])])]),t._v(" "),t.showLogin?e("LoginModal",{on:{close:t.closeLoginModal}}):t._e()],1)}),[],!1,null,"14a43684",null);e.default=component.exports;installComponents(component,{OnboardingLogoUpload:o(596).default,OnboardingAIImport:o(597).default,OnboardingProductImages:o(598).default})}}]);