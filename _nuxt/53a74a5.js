(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{579:function(e,t,o){var content=o(760);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(120).default)("53c668b6",content,!0,{sourceMap:!1})},759:function(e,t,o){"use strict";o(579)},760:function(e,t,o){var r=o(119)((function(i){return i[1]}));r.push([e.i,'.store-details[data-v-1ea0eab4]{padding:2rem}.store-details__header[data-v-1ea0eab4]{align-items:center;display:flex;margin-bottom:2rem}.store-details__title[data-v-1ea0eab4]{color:#2d3748;font-size:2rem;margin-bottom:0;margin-right:1rem}.store-details__title-loading[data-v-1ea0eab4]{height:30px;width:30px}.store-details__loading[data-v-1ea0eab4]{display:flex;justify-content:center;padding:2rem 0}.store-selector-wrapper[data-v-1ea0eab4]{margin-bottom:2rem}.select-wrapper[data-v-1ea0eab4]{display:inline-block;position:relative}.select-wrapper select[data-v-1ea0eab4]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #e2e8f0;border-radius:.25rem;font-size:1rem;min-width:250px;padding:.5rem 2rem .5rem .75rem}.select-wrapper[data-v-1ea0eab4]:after{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4a5568;content:"";height:0;pointer-events:none;position:absolute;right:.75rem;top:50%;transform:translateY(-50%);width:0}.store-details__section[data-v-1ea0eab4]{background-color:#fff;border-radius:.5rem;box-shadow:0 1px 3px rgba(0,0,0,.1);margin-bottom:2rem;padding:2rem}.store-details__section-title[data-v-1ea0eab4]{color:#2d3748;font-size:1.5rem;margin-bottom:1.5rem}.store-details__section-description[data-v-1ea0eab4]{color:#4a5568;margin-bottom:1.5rem}.form-group[data-v-1ea0eab4]{margin-bottom:1.5rem}.form-row[data-v-1ea0eab4]{display:flex;margin:0 -.5rem}.form-group.half[data-v-1ea0eab4]{padding:0 .5rem;width:50%}label[data-v-1ea0eab4]{color:#4a5568;display:block;font-weight:500;margin-bottom:.5rem}.form-control[data-v-1ea0eab4]{border:1px solid #e2e8f0;border-radius:.25rem;font-size:1rem;padding:.75rem;transition:border-color .15s ease-in-out;width:100%}.form-control[data-v-1ea0eab4]:focus{border-color:#1bb776;outline:none}.form-actions[data-v-1ea0eab4]{margin-top:2rem}.btn[data-v-1ea0eab4]{align-items:center;border:none;border-radius:.25rem;cursor:pointer;display:inline-flex;font-size:1rem;font-weight:500;justify-content:center;line-height:1;padding:.75rem 1.5rem;text-align:center;transition:all .15s ease-in-out}.btn-primary[data-v-1ea0eab4]{background-color:#1bb776;color:#fff}.btn-primary[data-v-1ea0eab4]:hover{background-color:#159e64}.btn-secondary[data-v-1ea0eab4]{background-color:#e53e3e;color:#fff;margin-left:.5rem}.btn-secondary[data-v-1ea0eab4]:hover{background-color:#c53030}.store-details__no-store[data-v-1ea0eab4]{color:#a0aec0;padding:2rem 0;text-align:center}.notification[data-v-1ea0eab4]{border-radius:.25rem;font-weight:500;margin-bottom:1.5rem;padding:.75rem 1rem}.notification--success[data-v-1ea0eab4]{background-color:#c6f6d5;border:1px solid #9ae6b4;color:#276749}.notification--error[data-v-1ea0eab4]{background-color:#fed7d7;border:1px solid #feb2b2;color:#c53030}',""]),r.locals={},e.exports=r},849:function(e,t,o){"use strict";o.r(t);o(50),o(41),o(13),o(27),o(196),o(29),o(28),o(51),o(33),o(52);var r=o(10),n=(o(73),o(494)),d=o(495),l=o(497),c=o(67);function m(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach((function(t){Object(r.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var v={name:"ButikkDetaljer",components:{AdminPage:n.default,Loading:d.default,LoginModal:l.default},data:function(){return{storeAddress:new c.a,statusMessage:"",hasStatusMessage:!1,isLoading:!1,initialLoading:!0,selectedStore:null,showLogin:!1,updateSuccess:!1,updateError:!1,notification:{show:!1,message:"",type:"success",section:"",timeout:null}}},watch:{selectedStore:function(e){e>0?this.fetchStoreData(e):this.storeAddress=new c.a,window&&window.localStorage&&localStorage.setItem("storeDetailsSelectedStore",e)}},mounted:function(){var e=this;this.$store.getters.userIsLoggedIn?this._userService.Reload().then((function(t){var o;t?(e.init(),!e.selectedStore&&null!==(o=e.$store.state.currentUser.adminIn)&&void 0!==o&&o.length&&(e.selectedStore=e.$store.state.currentUser.adminIn[0].id)):e.showLogin=!0})).catch((function(t){console.error("Error reloading user:",t),e.showLogin=!0})):this.showLogin=!0},methods:{init:function(){if(window&&window.localStorage){var e,t,o=localStorage.getItem("storeDetailsSelectedStore");o&&null!==(e=this.$store.state.currentUser.adminIn)&&void 0!==e&&e.some((function(s){return s.id===parseInt(o)}))?this.selectedStore=parseInt(o):null!==(t=this.$store.state.currentUser.adminIn)&&void 0!==t&&t.length&&(this.selectedStore=this.$store.state.currentUser.adminIn[0].id)}},closeLoginModal:function(e){var t=this;this.showLogin=!1,e&&this._userService.Reload().then((function(e){e&&t.init()}))},showNotification:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",section=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.notification.timeout&&clearTimeout(this.notification.timeout),this.notification={show:!0,message:e,type:o,section:section,timeout:null},this.notification.timeout=setTimeout((function(){t.notification.show=!1}),3e3)},fetchStoreData:function(e){var t=this;e&&(this.isLoading=!0,this._storeService.Get(e).then((function(e){e&&e.address?t.storeAddress=f({},e.address):t.storeAddress=new c.a,e&&e.statusMessage?(t.statusMessage=e.statusMessage,t.hasStatusMessage=!0):(t.statusMessage="",t.hasStatusMessage=!1),t.isLoading=!1,t.initialLoading=!1})).catch((function(e){console.error("Error fetching store data:",e),t.isLoading=!1,t.initialLoading=!1,t.showNotification("Kunne ikke hente butikkdata. Vennligst prøv igjen senere.","error","")})))},updateAddress:function(){var e=this;if(this.selectedStore){this.isLoading=!0;var t=f({},this.storeAddress);this._storeService.UpdateAddress(this.selectedStore,t).then((function(t){e.isLoading=!1,t?e.showNotification("Adresse oppdatert","success","address"):e.showNotification("Kunne ikke oppdatere adresse. Vennligst prøv igjen senere.","error","address")})).catch((function(t){console.error("Error updating address:",t),e.isLoading=!1,e.showNotification("Kunne ikke oppdatere adresse. Vennligst prøv igjen senere.","error","address")}))}},updateStatusMessage:function(){var e=this;this.selectedStore&&this.statusMessage.trim()&&(this.isLoading=!0,this._storeService.UpdateStatusMessage(this.selectedStore,this.statusMessage.trim()).then((function(t){e.isLoading=!1,t?(e.hasStatusMessage=!0,e.showNotification("Status melding oppdatert","success","statusMessage")):e.showNotification("Kunne ikke oppdatere status melding. Vennligst prøv igjen senere.","error","statusMessage")})).catch((function(t){console.error("Error updating status message:",t),e.isLoading=!1,e.showNotification("Kunne ikke oppdatere status melding. Vennligst prøv igjen senere.","error","statusMessage")})))},removeStatusMessage:function(){var e=this;this.selectedStore&&(this.isLoading=!0,this._storeService.UpdateStatusMessage(this.selectedStore,"").then((function(t){e.isLoading=!1,t?(e.statusMessage="",e.hasStatusMessage=!1,e.showNotification("Status melding fjernet","success","statusMessage")):e.showNotification("Kunne ikke fjerne status melding. Vennligst prøv igjen senere.","error","statusMessage")})).catch((function(t){console.error("Error removing status message:",t),e.isLoading=!1,e.showNotification("Kunne ikke fjerne status melding. Vennligst prøv igjen senere.","error","statusMessage")})))}}},h=v,_=(o(759),o(78)),component=Object(_.a)(h,(function(){var e=this,t=e._self._c;return t("AdminPage",[t("div",{staticClass:"store-details"},[t("div",{staticClass:"store-details__header"},[t("h1",{staticClass:"store-details__title"},[e._v("Innstillinger")]),e._v(" "),e.isLoading?t("div",{staticClass:"store-details__title-loading"},[t("Loading",{attrs:{loading:!0}})],1):e._e()]),e._v(" "),e.initialLoading?t("div",{staticClass:"store-details__loading"},[t("Loading",{attrs:{loading:!0}})],1):t("div",{staticClass:"store-details__content"},[t("div",{staticClass:"store-selector-wrapper"},[t("div",{staticClass:"select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedStore,expression:"selectedStore"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedStore=t.target.multiple?o:o[0]}}},e._l(e.$store.state.currentUser.adminIn,(function(option){return t("option",{key:option.id,domProps:{value:option.id}},[e._v("\n              "+e._s(option.name)+" ("+e._s(option.id)+")\n            ")])})),0)])]),e._v(" "),e.selectedStore>0?t("div",{staticClass:"store-details__form"},[t("div",{staticClass:"store-details__section store-details__address"},[t("h2",{staticClass:"store-details__section-title"},[e._v("Adresse informasjon")]),e._v(" "),e.notification.show&&"address"===e.notification.section?t("div",{class:["notification","notification--".concat(e.notification.type)]},[e._v("\n            "+e._s(e.notification.message)+"\n          ")]):e._e(),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"fullAddress"}},[e._v("Adresse")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.storeAddress.fullAddress,expression:"storeAddress.fullAddress"}],staticClass:"form-control",attrs:{id:"fullAddress",type:"text",placeholder:"Gateadresse"},domProps:{value:e.storeAddress.fullAddress},on:{input:function(t){t.target.composing||e.$set(e.storeAddress,"fullAddress",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group half"},[t("label",{attrs:{for:"zipCode"}},[e._v("Postnummer")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.storeAddress.zipCode,expression:"storeAddress.zipCode"}],staticClass:"form-control",attrs:{id:"zipCode",type:"text",placeholder:"Postnummer"},domProps:{value:e.storeAddress.zipCode},on:{input:function(t){t.target.composing||e.$set(e.storeAddress,"zipCode",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group half"},[t("label",{attrs:{for:"city"}},[e._v("Sted")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.storeAddress.city,expression:"storeAddress.city"}],staticClass:"form-control",attrs:{id:"city",type:"text",placeholder:"Sted"},domProps:{value:e.storeAddress.city},on:{input:function(t){t.target.composing||e.$set(e.storeAddress,"city",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-actions"},[t("button",{staticClass:"btn btn-primary",on:{click:e.updateAddress}},[e._v("\n              Lagre endringer\n            ")])])]),e._v(" "),t("div",{staticClass:"store-details__section store-details__status-message"},[t("h2",{staticClass:"store-details__section-title"},[e._v("Status melding")]),e._v(" "),e.notification.show&&"statusMessage"===e.notification.section?t("div",{class:["notification","notification--".concat(e.notification.type)]},[e._v("\n            "+e._s(e.notification.message)+"\n          ")]):e._e(),e._v(" "),t("p",{staticClass:"store-details__section-description"},[e._v("Status meldingen vises til kundene på forsiden av butikken din. Bruk den for å informere om viktige beskjeder.")]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"statusMessage"}},[e._v("Status melding")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.statusMessage,expression:"statusMessage"}],staticClass:"form-control",attrs:{id:"statusMessage",type:"text",placeholder:"F.eks. 'Stengt pga. ferie 1-10 juli' eller 'Begrenset meny denne uken'"},domProps:{value:e.statusMessage},on:{input:function(t){t.target.composing||(e.statusMessage=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-actions"},[t("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.statusMessage.trim()},on:{click:e.updateStatusMessage}},[e._v("\n              Oppdater status melding\n            ")]),e._v(" "),e.hasStatusMessage?t("button",{staticClass:"btn btn-secondary",on:{click:e.removeStatusMessage}},[e._v("\n              Fjern\n            ")]):e._e()])])]):t("div",{staticClass:"store-details__no-store"},[t("p",[e._v("Velg en butikk for å administrere butikkdetaljer.")])])])]),e._v(" "),e.showLogin?t("LoginModal",{on:{close:e.closeLoginModal}}):e._e()],1)}),[],!1,null,"1ea0eab4",null);t.default=component.exports}}]);