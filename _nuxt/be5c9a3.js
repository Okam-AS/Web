(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{573:function(e,r,t){var content=t(747);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(120).default)("727b4223",content,!0,{sourceMap:!1})},746:function(e,r,t){"use strict";t(573)},747:function(e,r,t){var o=t(119)((function(i){return i[1]}));o.push([e.i,".orders-page[data-v-3db9005a]{margin:0 auto;max-width:1400px;padding:24px}@media(max-width:768px){.orders-page[data-v-3db9005a]{padding:8px}}.search-filters-section[data-v-3db9005a]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);margin-bottom:24px;padding:24px}.search-filters-section .search-row[data-v-3db9005a]{margin-bottom:16px}.search-filters-section .search-row .search-input-wrapper[data-v-3db9005a]{align-items:center;display:flex;gap:12px}.search-filters-section .search-row .search-input-wrapper .search-input[data-v-3db9005a]{border:2px solid #e2e8f0;border-radius:8px;flex:1;font-size:1rem;padding:12px 16px;transition:border-color .2s}.search-filters-section .search-row .search-input-wrapper .search-input[data-v-3db9005a]:focus{border-color:#1bb776;box-shadow:0 0 0 3px rgba(27,183,118,.1);outline:none}.search-filters-section .search-row .search-input-wrapper .search-btn[data-v-3db9005a]{align-items:center;background:#1bb776;border:none;border-radius:8px;color:#fff;cursor:pointer;display:flex;font-size:.95rem;font-weight:500;gap:8px;padding:12px 20px;transition:all .2s ease}.search-filters-section .search-row .search-input-wrapper .search-btn[data-v-3db9005a]:hover{background:#159c63;transform:translateY(-1px)}.search-filters-section .search-row .search-input-wrapper .search-btn .material-icons[data-v-3db9005a]{font-size:18px}.search-filters-section .date-filters-row[data-v-3db9005a]{align-items:flex-end;display:flex;flex-wrap:wrap;gap:16px}.search-filters-section .date-filters-row .date-input[data-v-3db9005a]{display:flex;flex-direction:column;gap:4px}.search-filters-section .date-filters-row .date-input label[data-v-3db9005a]{color:#4a5568;font-size:.9rem;font-weight:500}.search-filters-section .date-filters-row .date-input .date-filter[data-v-3db9005a]{border:2px solid #e2e8f0;border-radius:8px;font-size:.95rem;padding:10px 12px;transition:border-color .2s}.search-filters-section .date-filters-row .date-input .date-filter[data-v-3db9005a]:focus{border-color:#1bb776;box-shadow:0 0 0 3px rgba(27,183,118,.1);outline:none}.search-filters-section .date-filters-row .apply-filters-btn[data-v-3db9005a],.search-filters-section .date-filters-row .clear-filters-btn[data-v-3db9005a]{border:none;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:500;height:-moz-fit-content;height:fit-content;padding:10px 16px;transition:all .2s ease}.search-filters-section .date-filters-row .apply-filters-btn[data-v-3db9005a]{background:#1bb776;color:#fff}.search-filters-section .date-filters-row .apply-filters-btn[data-v-3db9005a]:hover{background:#159c63;transform:translateY(-1px)}.search-filters-section .date-filters-row .clear-filters-btn[data-v-3db9005a]{background:#f8f9fa;border:1px solid #e2e8f0;color:#4a5568}.search-filters-section .date-filters-row .clear-filters-btn[data-v-3db9005a]:hover{background:#e2e8f0;transform:translateY(-1px)}@media(max-width:768px){.search-filters-section[data-v-3db9005a]{padding:16px}.search-filters-section .search-row .search-input-wrapper[data-v-3db9005a]{flex-direction:column}.search-filters-section .search-row .search-input-wrapper .search-input[data-v-3db9005a]{width:100%}.search-filters-section .search-row .search-input-wrapper .search-btn[data-v-3db9005a]{justify-content:center;width:100%}.search-filters-section .date-filters-row[data-v-3db9005a]{align-items:stretch;flex-direction:column}.search-filters-section .date-filters-row .apply-filters-btn[data-v-3db9005a],.search-filters-section .date-filters-row .clear-filters-btn[data-v-3db9005a],.search-filters-section .date-filters-row .date-input[data-v-3db9005a]{width:100%}}.orders-loading-banner[data-v-3db9005a]{background-color:#f7fafc;border:1px solid #e2e8f0;border-radius:10px;margin-bottom:16px;padding:24px}.orders-loading-banner .loading-content[data-v-3db9005a]{align-items:center;display:flex;gap:12px;justify-content:center}.orders-loading-banner .loading-content .loading-spinner[data-v-3db9005a]{animation:spin-3db9005a 1s linear infinite;border:2px solid #e2e8f0;border-radius:50%;border-top-color:#1bb776;height:20px;width:20px}.orders-loading-banner .loading-content p[data-v-3db9005a]{color:#4a5568;font-size:1em;margin:0}.orders-info-banner[data-v-3db9005a]{background-color:#f7fafc;border:1px solid #e2e8f0;border-radius:10px;margin-bottom:16px;padding:15px}.orders-info-banner p[data-v-3db9005a]{color:#4a5568;font-size:1em;margin:0;text-align:center}.orders-section[data-v-3db9005a]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:24px}.orders-section .orders-header[data-v-3db9005a]{align-items:center;display:flex;justify-content:center;margin-bottom:20px}.orders-section .orders-header .header-controls[data-v-3db9005a]{align-items:center;display:flex;gap:16px}.orders-section .orders-header .pagination-controls-header[data-v-3db9005a]{align-items:center;background:#fff;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.05);display:flex;gap:6px;padding:4px}.orders-section .orders-header .pagination-controls-header .nav-btn[data-v-3db9005a]{align-items:center;background:transparent;border:none;border-radius:6px;color:#4a5568;cursor:pointer;display:flex;height:36px;justify-content:center;min-width:36px;padding:8px;transition:all .2s ease}.orders-section .orders-header .pagination-controls-header .nav-btn[data-v-3db9005a]:hover:not(:disabled){background:#f8fafc;color:#1bb776}.orders-section .orders-header .pagination-controls-header .nav-btn[data-v-3db9005a]:disabled{cursor:not-allowed;opacity:.3}.orders-section .orders-header .pagination-controls-header .nav-btn .material-icons[data-v-3db9005a]{font-size:18px}.orders-section .orders-header .pagination-controls-header .page-numbers[data-v-3db9005a]{display:flex;gap:1px;margin:0 4px}.orders-section .orders-header .pagination-controls-header .page-btn[data-v-3db9005a]{align-items:center;background:transparent;border:none;border-radius:6px;color:#4a5568;cursor:pointer;display:flex;font-size:.875rem;font-weight:500;height:36px;justify-content:center;min-width:36px;padding:8px 10px;transition:all .2s ease}.orders-section .orders-header .pagination-controls-header .page-btn[data-v-3db9005a]:hover:not(:disabled):not(.active):not(.ellipsis){background:#f8fafc;color:#2d3748}.orders-section .orders-header .pagination-controls-header .page-btn.active[data-v-3db9005a]{background:#1bb776;box-shadow:0 1px 2px rgba(27,183,118,.2);color:#fff;font-weight:600}.orders-section .orders-header .pagination-controls-header .page-btn[data-v-3db9005a]:disabled{cursor:not-allowed;opacity:.3}.orders-section .orders-header .pagination-controls-header .page-btn.ellipsis[data-v-3db9005a]{background:none;color:#a0aec0;cursor:default;font-weight:400}.orders-section .orders-header .pagination-controls-header .page-btn.ellipsis[data-v-3db9005a]:hover{background:none;color:#a0aec0}@media(max-width:768px){.orders-section .orders-header[data-v-3db9005a]{align-items:flex-start;flex-direction:column;gap:16px}.orders-section .orders-header .header-controls[data-v-3db9005a]{justify-content:space-between;width:100%}}.orders-section .refresh-btn[data-v-3db9005a]{align-items:center;background:#1bb776;border:none;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.1);color:#fff;cursor:pointer;display:flex;font-size:.9rem;font-weight:500;gap:8px;padding:8px 16px;transition:all .2s ease}.orders-section .refresh-btn[data-v-3db9005a]:hover:not(:disabled){background:#159c63;box-shadow:0 2px 6px rgba(0,0,0,.15);transform:translateY(-1px)}.orders-section .refresh-btn[data-v-3db9005a]:disabled{box-shadow:0 1px 3px rgba(0,0,0,.1);cursor:not-allowed;opacity:.6;transform:none}.orders-section .refresh-btn .material-icons[data-v-3db9005a]{font-size:18px}.orders-section .refresh-btn .spinner[data-v-3db9005a]{animation:spin-3db9005a 1s linear infinite;border:2px solid transparent;border-radius:50%;border-top-color:currentcolor;height:16px;width:16px}.orders-section .orders-table[data-v-3db9005a]{border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.orders-section .order-row[data-v-3db9005a]{grid-gap:16px;align-items:center;border-bottom:1px solid #e2e8f0;display:grid;gap:16px;grid-template-columns:minmax(100px,1fr) minmax(150px,1.5fr) minmax(100px,1fr) minmax(120px,1.2fr) minmax(130px,1.3fr) minmax(100px,1fr) minmax(80px,.8fr) minmax(100px,1fr) minmax(80px,.8fr);padding:12px 16px}.orders-section .order-row[data-v-3db9005a]:last-child{border-bottom:none}.orders-section .order-row[data-v-3db9005a]:not(.header):hover{background:#f8fafc}.orders-section .order-row.clickable[data-v-3db9005a]{cursor:pointer;transition:all .2s ease}.orders-section .order-row.clickable[data-v-3db9005a]:hover{background:#f1f5f9;box-shadow:0 2px 8px rgba(0,0,0,.1);transform:translateY(-1px)}.orders-section .order-row .col[data-v-3db9005a]{font-size:.9rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.orders-section .order-row.header[data-v-3db9005a]{background:#f8f9fa;border-bottom:2px solid #e2e8f0;color:#4a5568;font-weight:600;position:static}.orders-section .order-row.header .col[data-v-3db9005a]{font-size:.85rem;letter-spacing:.025em;text-transform:uppercase}@media(max-width:768px){.orders-section .order-row[data-v-3db9005a]{gap:8px;grid-template-columns:minmax(80px,.8fr) minmax(120px,1.2fr) minmax(80px,.8fr) minmax(100px,1fr) minmax(100px,1fr) minmax(80px,.8fr) minmax(60px,.6fr) minmax(80px,.8fr) minmax(60px,.6fr);padding:10px 12px}.orders-section .order-row .col[data-v-3db9005a]{font-size:.8rem}}.orders-section .status-badge[data-v-3db9005a]{border-radius:12px;display:inline-block;font-size:.75rem;font-weight:600;letter-spacing:.025em;padding:4px 8px;text-transform:uppercase}.orders-section .status-badge.status-processing[data-v-3db9005a]{background:#fef3c7;color:#d97706}.orders-section .status-badge.status-ready[data-v-3db9005a]{background:#dcfce7;color:#16a34a}.orders-section .status-badge.status-completed[data-v-3db9005a]{background:#e0f2fe;color:#0284c7}.orders-section .status-badge.status-canceled[data-v-3db9005a]{background:#fee2e2;color:#dc2626}.orders-section .status-badge.status-default[data-v-3db9005a]{background:#f3f4f6;color:#6b7280}@media(max-width:768px){.orders-section[data-v-3db9005a]{border-radius:0;margin:0 -8px;padding:16px 8px}.orders-section .orders-table[data-v-3db9005a]{-webkit-overflow-scrolling:touch;overflow-x:auto}.orders-section .order-row[data-v-3db9005a]{min-width:900px}}@keyframes spin-3db9005a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),o.locals={},e.exports=o},844:function(e,r,t){"use strict";t.r(r);var o=t(0),d=(t(9),t(57),t(494)),n=t(497),c=t(804),l={components:{AdminPage:d.default,LoginModal:n.default,OrderModal:c.default},data:function(){return{showLogin:!1,ordersData:null,currentPage:1,pageSize:20,isLoadingOrders:!1,searchQuery:"",dateFrom:"",dateTo:"",showOrderModal:!1,selectedOrderCode:null}},computed:{visiblePages:function(){var e,r=(null===(e=this.ordersData)||void 0===e?void 0:e.totalPages)||1,t=this.currentPage,o=[];if(r<=7)for(var i=1;i<=r;i++)o.push(i);else{o.push(1),t>4&&o.push("...");for(var d=Math.max(2,t-1),n=Math.min(r-1,t+1),c=d;c<=n;c++)o.includes(c)||o.push(c);t<r-3&&o.push("..."),r>1&&o.push(r)}return o}},mounted:function(){this.$store.getters.userIsLoggedIn?this.fetchOrders():this.showLogin=!0},methods:{closeLoginModal:function(e){this.showLogin=!e,e&&this.fetchOrders()},fetchOrders:function(e){var r=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var o,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="number"!=typeof e||isNaN(e)?r.currentPage:e,r.isLoadingOrders=!0,t.prev=2,t.next=5,r._orderService.GetAllOrdersWithPagination(o,r.pageSize,r.searchQuery||void 0,r.dateFrom||void 0,r.dateTo||void 0);case 5:d=t.sent,r.ordersData=d,r.currentPage=r.ordersData.page,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.warn("Failed to fetch orders:",t.t0),r.ordersData={orders:[],totalCount:0,page:1,pageSize:r.pageSize,totalPages:0};case 14:return t.prev=14,r.isLoadingOrders=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,10,14,17]])})))()},changePage:function(e){if("..."!==e){var r="number"==typeof e?e:parseInt(e,10);isNaN(r)||r<1||(this.currentPage=r,this.fetchOrders(r))}},clearFilters:function(){this.searchQuery="",this.dateFrom="",this.dateTo="",this.fetchOrders(1)},getStatusClass:function(e){switch(e){case"Processing":return"status-processing";case"ReadyForPickup":return"status-ready";case"Completed":return"status-completed";case"Canceled":return"status-canceled";default:return"status-default"}},formatDate:function(e){return e&&"0001-01-01T00:00:00"!==e?new Date(e).toLocaleString("no-NO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):null},openOrderModal:function(e){this.selectedOrderCode=e,this.showOrderModal=!0},closeOrderModal:function(){this.showOrderModal=!1,this.selectedOrderCode=null}}},f=(t(746),t(78)),component=Object(f.a)(l,(function(){var e=this,r=e._self._c;return r("AdminPage",[r("div",{staticClass:"orders-page"},[r("h2",[e._v("Alle bestillinger")]),e._v(" "),r("div",{staticClass:"search-filters-section"},[r("div",{staticClass:"search-row"},[r("div",{staticClass:"search-input-wrapper"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"search-input",attrs:{type:"text",placeholder:"Søk etter kode, telefon eller ID..."},domProps:{value:e.searchQuery},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.fetchOrders(1)},input:function(r){r.target.composing||(e.searchQuery=r.target.value)}}}),e._v(" "),r("button",{staticClass:"search-btn",on:{click:function(r){return e.fetchOrders(1)}}},[r("span",{staticClass:"material-icons"},[e._v("search")]),e._v("\n            Søk\n          ")])])]),e._v(" "),r("div",{staticClass:"date-filters-row"},[r("div",{staticClass:"date-input"},[r("label",[e._v("Fra dato:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFrom,expression:"dateFrom"}],staticClass:"date-filter",attrs:{type:"date"},domProps:{value:e.dateFrom},on:{input:function(r){r.target.composing||(e.dateFrom=r.target.value)}}})]),e._v(" "),r("div",{staticClass:"date-input"},[r("label",[e._v("Til dato:")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],staticClass:"date-filter",attrs:{type:"date"},domProps:{value:e.dateTo},on:{input:function(r){r.target.composing||(e.dateTo=r.target.value)}}})]),e._v(" "),r("button",{staticClass:"apply-filters-btn",on:{click:function(r){return e.fetchOrders(1)}}},[e._v("\n          Filtrer\n        ")]),e._v(" "),r("button",{staticClass:"clear-filters-btn",on:{click:e.clearFilters}},[e._v("\n          Nullstill\n        ")])])]),e._v(" "),e.isLoadingOrders&&!e.ordersData?r("div",{staticClass:"orders-loading-banner"},[r("div",{staticClass:"loading-content"},[r("div",{staticClass:"loading-spinner"}),e._v(" "),r("p",[e._v("Laster bestillinger...")])])]):e._e(),e._v(" "),!e.isLoadingOrders&&e.ordersData&&e.ordersData.orders&&0===e.ordersData.orders.length?r("div",{staticClass:"orders-info-banner"},[r("p",[e._v("Ingen bestillinger funnet")])]):e._e(),e._v(" "),e.ordersData&&e.ordersData.orders&&e.ordersData.orders.length>0?r("div",{staticClass:"orders-section"},[r("div",{staticClass:"orders-header"},[r("div",{staticClass:"header-controls"},[r("div",{staticClass:"pagination-controls-header"},[r("button",{staticClass:"pagination-btn nav-btn",attrs:{disabled:e.currentPage<=1||e.isLoadingOrders,title:"Forrige side"},on:{click:function(r){return e.changePage(e.currentPage-1)}}},[r("span",{staticClass:"material-icons"},[e._v("chevron_left")])]),e._v(" "),r("div",{staticClass:"page-numbers"},e._l(e.visiblePages,(function(t){return r("button",{key:t,class:["page-btn",{active:t===e.currentPage,ellipsis:"..."===t}],attrs:{disabled:e.isLoadingOrders||"..."===t},on:{click:function(r){return e.changePage(t)}}},[e._v("\n                "+e._s(t)+"\n              ")])})),0),e._v(" "),r("button",{staticClass:"pagination-btn nav-btn",attrs:{disabled:e.currentPage>=(e.ordersData.totalPages||1)||e.isLoadingOrders,title:"Neste side"},on:{click:function(r){return e.changePage(e.currentPage+1)}}},[r("span",{staticClass:"material-icons"},[e._v("chevron_right")])])]),e._v(" "),r("button",{staticClass:"refresh-btn",attrs:{disabled:e.isLoadingOrders},on:{click:function(r){return e.fetchOrders()}}},[e.isLoadingOrders?r("span",{staticClass:"spinner"}):r("span",{staticClass:"material-icons"},[e._v("refresh")]),e._v("\n            Oppdater\n          ")])])]),e._v(" "),r("div",{staticClass:"orders-table"},[r("div",{staticClass:"order-row header"},[r("div",{staticClass:"col order-id"},[e._v("Kode")]),e._v(" "),r("div",{staticClass:"col store-name"},[e._v("Butikk")]),e._v(" "),r("div",{staticClass:"col status"},[e._v("Status")]),e._v(" "),r("div",{staticClass:"col user-phone"},[e._v("Kunde")]),e._v(" "),r("div",{staticClass:"col created"},[e._v("Opprettet")]),e._v(" "),r("div",{staticClass:"col amount"},[e._v("Beløp")]),e._v(" "),r("div",{staticClass:"col delivery-type"},[e._v("Levering")]),e._v(" "),r("div",{staticClass:"col order-code"},[e._v("ID")]),e._v(" "),r("div",{staticClass:"col total-time"},[e._v("Total tid")])]),e._v(" "),e._l(e.ordersData.orders,(function(t){return r("div",{key:t.orderId,staticClass:"order-row clickable",on:{click:function(r){return e.openOrderModal(t.orderCode)}}},[r("div",{staticClass:"col order-id"},[e._v("\n            "+e._s(t.friendlyOrderId)+"\n          ")]),e._v(" "),r("div",{staticClass:"col store-name"},[e._v("\n            "+e._s(t.storeName)+"\n          ")]),e._v(" "),r("div",{staticClass:"col status"},[r("span",{staticClass:"status-badge",class:e.getStatusClass(t.status)},[e._v("\n              "+e._s(e.orderStatusLabel(t.status))+"\n            ")])]),e._v(" "),r("div",{staticClass:"col user-phone"},[e._v("\n            "+e._s(t.userFullName||t.userPhoneNumber||"-")+"\n          ")]),e._v(" "),r("div",{staticClass:"col created"},[e._v("\n            "+e._s(e.formatDate(t.created))+"\n          ")]),e._v(" "),r("div",{staticClass:"col amount"},[e._v("\n            "+e._s(e.priceLabel(t.finalAmount,!0))+"\n          ")]),e._v(" "),r("div",{staticClass:"col delivery-type"},[e._v("\n            "+e._s(e.deliveryTypeLabel(t.deliveryType))+"\n          ")]),e._v(" "),r("div",{staticClass:"col order-code"},[e._v("\n            "+e._s(t.orderCode)+"\n          ")]),e._v(" "),r("div",{staticClass:"col total-time"},[e._v("\n            "+e._s(t.totalTimeInMinutes?t.totalTimeInMinutes+" min":"-")+"\n          ")])])}))],2)]):e._e(),e._v(" "),e.showLogin?r("LoginModal",{on:{close:e.closeLoginModal}}):e._e(),e._v(" "),e.showOrderModal?r("OrderModal",{attrs:{"order-code":e.selectedOrderCode},on:{close:e.closeOrderModal}}):e._e()],1)])}),[],!1,null,"3db9005a",null);r.default=component.exports}}]);