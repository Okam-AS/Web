(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{576:function(e,t,r){var content=r(753);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(120).default)("1e033ddc",content,!0,{sourceMap:!1})},752:function(e,t,r){"use strict";r(576)},753:function(e,t,r){var n=r(119)((function(i){return i[1]}));n.push([e.i,'.container{margin:0 auto;max-width:1200px;padding:0 2rem 2rem;transition:all .3s cubic-bezier(.4,0,.2,1)}@media(min-width:769px){.container.editor-open{margin-right:500px;max-width:calc(100% - 500px)}}@media(max-width:768px){.container{padding:1rem}.container.editor-open{height:100vh;overflow:hidden}}.store-selector{margin-bottom:2rem}.store-selector .selector-container{align-items:center;display:flex;flex-wrap:wrap;gap:1rem}@media(max-width:768px){.store-selector .selector-container{gap:.5rem}}.store-selector .filter-wrapper{flex:1;min-width:200px}@media(max-width:768px){.store-selector .filter-wrapper{max-width:none;width:100%}}.select-wrapper{display:inline-block;position:relative}.select-wrapper select{min-width:200px}.select-wrapper:after{content:"üè†";pointer-events:none;position:absolute;right:.75rem;top:50%;transform:translateY(-50%)}.select-wrapper.items-per-page:after{content:"ùç¨"}.products-grid{grid-gap:.75rem;display:grid;gap:.75rem;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}@media(max-width:480px){.products-grid{grid-template-columns:repeat(auto-fill,minmax(130px,1fr))}}.product-card{background:#fff;border:1px solid #e2e8f0;border-radius:.75rem;padding:.625rem;transition:all .2s;width:100%}.product-card:hover{box-shadow:0 4px 6px -1px rgba(0,0,0,.1);transform:translateY(-2px)}.product-image{align-items:center;background:#f8fafc;border:2px dashed transparent;border-radius:.5rem;cursor:pointer;display:flex;height:0;justify-content:center;margin:0 auto;overflow:hidden;padding-bottom:85%;position:relative;width:100%}.product-image img{border-radius:.375rem;-o-object-fit:cover;object-fit:cover}.product-image .no-image,.product-image img{height:100%;left:0;position:absolute;top:0;width:100%}.product-image .no-image{align-items:center;color:#94a3b8;display:flex;flex-direction:column;justify-content:center}.product-image .no-image i{font-size:1.25rem;margin-bottom:.375rem}.product-image .no-image span{font-size:.75rem}.product-image .loading-overlay{align-items:center;background:hsla(0,0%,100%,.9);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:10}.product-image .loading-overlay i{color:#3b82f6;font-size:1.5rem}.product-image.dragging{background-color:#f0f9ff;border-color:#3b82f6}.product-image .dimension-tag{background:rgba(0,0,0,.6);border-top-left-radius:4px;bottom:0;color:#fff;font-size:.675rem;padding:2px 6px;position:absolute;right:0;z-index:5}.product-info{margin-top:.75rem;text-align:center}.product-info h3{font-size:.8125rem;font-weight:600;line-height:1.25;margin:0 0 .375rem}.product-info p{-webkit-line-clamp:2;-webkit-box-orient:vertical;color:#64748b;display:-webkit-box;font-size:.75rem;margin:0 0 .375rem;overflow:hidden}.product-info .price-container{margin:.5rem 0}.product-info .price-container .price{color:#0f172a;font-size:.875rem;font-weight:600}.product-info .price-container .table-price{color:#64748b;font-size:.75rem;margin-top:.25rem}.product-info .price-container .table-price .table-label{color:#94a3b8;margin-right:.25rem}.results-count{align-items:center;color:#64748b;display:flex;font-size:.875rem;gap:.5rem;margin:1rem 0}.results-count .clear-filter-btn{background:#ef4444;border:none;border-radius:.375rem;color:#fff;cursor:pointer;font-size:.75rem;padding:.25rem .75rem;transition:all .2s}.results-count .clear-filter-btn:hover{background:#dc2626}.hidden-file-input{display:none}.pagination{align-items:center;display:flex;gap:1rem;justify-content:center;margin-top:2rem}.pagination .pagination-btn{background:#fff;border:1px solid #e2e8f0;border-radius:.375rem;cursor:pointer;padding:.5rem 1rem}.pagination .pagination-btn:disabled{cursor:not-allowed;opacity:.5}.pagination .pagination-btn:not(:disabled):hover{background:#f8fafc}.pagination .page-numbers{display:flex;gap:.5rem}.pagination .page-numbers .page-number{align-items:center;background:#fff;border:1px solid #e2e8f0;border-radius:.375rem;cursor:pointer;display:flex;height:2rem;justify-content:center;width:2rem}.pagination .page-numbers .page-number:hover{background:#f8fafc}.pagination .page-numbers .page-number.active{background:#334155;border-color:#334155;color:#fff}@media(max-width:480px){.pagination .page-numbers{display:none}.pagination .pagination-btn{flex:1}}.items-per-page select{min-width:120px}.product-editor{background:#fff;box-shadow:-5px 0 30px rgba(0,0,0,.15);height:100vh;position:fixed;right:-500px;top:0;transition:all .3s cubic-bezier(.4,0,.2,1);width:500px;z-index:1000}.product-editor.is-open{right:0}@media(max-width:768px){.product-editor.is-open:before{background:rgba(0,0,0,.5);bottom:0;content:"";left:0;position:fixed;right:0;top:0;z-index:-1}.product-editor{right:-100%;width:100%}}.product-editor .editor-content{background:#f8fafc;display:flex;flex-direction:column;height:100%}.product-editor .editor-header{align-items:center;background:#fff;border-bottom:1px solid #e2e8f0;box-shadow:0 2px 4px rgba(0,0,0,.05);display:flex;justify-content:space-between;padding:1.5rem}.product-editor .editor-header h2{color:#1e293b;font-size:1.25rem;font-weight:600;margin:0}.product-editor .editor-header .close-btn{align-items:center;background:#f1f5f9;border:none;border-radius:.5rem;cursor:pointer;display:flex;font-size:1.25rem;height:40px;justify-content:center;padding:.5rem;transition:all .2s;width:40px}.product-editor .editor-header .close-btn:hover{background:#e2e8f0;color:#ef4444}.product-editor .editor-body{flex:1;overflow-y:auto;padding:1.5rem}@media(max-width:768px){.product-editor .editor-body{padding:1rem}}.product-editor .editor-actions{background:#fff;border-top:1px solid #e2e8f0;box-shadow:0 -2px 4px rgba(0,0,0,.05);display:flex;gap:1rem;padding:1.25rem}.product-editor .editor-actions button{border-radius:.5rem;flex:1}.product-editor .editor-actions .delete-btn,.product-editor .editor-actions button{cursor:pointer;font-size:.875rem;font-weight:500;padding:.75rem 1.5rem;transition:all .2s}.product-editor .editor-actions .delete-btn{align-items:center;background:#fff;border:1px solid #ef4444;border-radius:.5rem;color:#ef4444;display:flex;gap:.5rem}.product-editor .editor-actions .delete-btn:disabled{cursor:not-allowed;opacity:.5}.product-editor .editor-actions .delete-btn:not(:disabled):hover{background:#f8fafc;border-color:#cbd5e1}.edit-btn{background:#f8fafc;border:1px solid #e2e8f0;border-radius:.375rem;cursor:pointer;display:inline-flex;font-size:.75rem;margin-left:auto;margin-right:auto;margin-top:.5rem;min-width:80px;padding:.25rem .5rem}.edit-btn:hover{background:#f1f5f9}.checkbox-label input[type=checkbox]{width:auto}.spinner{animation:spin .8s linear infinite;border:2px solid transparent;border-radius:50%;border-top-color:#fff;height:16px;width:16px}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.search-input input:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.1)}.form-group{margin-bottom:1.25rem}.form-group label{color:#334155;display:block;font-size:.875rem;font-weight:500;margin-bottom:.5rem}.form-group input[type=number],.form-group input[type=text],.form-group textarea{background:#fff;border:1px solid #e2e8f0;border-radius:.375rem;font-size:.875rem;padding:.625rem;transition:all .2s;width:100%}.form-group input[type=number]:focus,.form-group input[type=text]:focus,.form-group textarea:focus{border-color:#334155;box-shadow:0 0 0 3px rgba(51,65,85,.1);outline:none}.form-group input[type=number]::-moz-placeholder,.form-group input[type=text]::-moz-placeholder,.form-group textarea::-moz-placeholder{color:#94a3b8}.form-group input[type=number]::placeholder,.form-group input[type=text]::placeholder,.form-group textarea::placeholder{color:#94a3b8}.form-group textarea{min-height:80px;resize:vertical}.checkbox-label{align-items:center;cursor:pointer;display:flex;gap:.5rem;margin-bottom:.75rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.checkbox-label input[type=checkbox]{border:1px solid #e2e8f0;border-radius:.25rem;cursor:pointer;height:1rem;width:1rem}.checkbox-label input[type=checkbox]:checked{background-color:#334155;border-color:#334155}.save-btn{align-items:center;background:#334155;border:none;border-radius:.5rem;color:#fff;cursor:pointer;display:flex;font-size:.875rem;font-weight:500;gap:.5rem;justify-content:center;padding:.75rem 1.5rem;transition:all .2s}.save-btn:disabled{background:#94a3b8;cursor:not-allowed;opacity:.5}.save-btn:not(:disabled):hover{background:#1e293b;transform:translateY(-1px)}.save-btn:active{transform:translateY(0)}.cancel-btn,.edit-btn,.pagination-btn{background:#fff;border:1px solid #e2e8f0;border-radius:.5rem;color:#334155;cursor:pointer;font-size:.875rem;font-weight:500;padding:.75rem 1.5rem;transition:all .2s}.cancel-btn:hover:not(:disabled),.edit-btn:hover:not(:disabled),.pagination-btn:hover:not(:disabled){background:#f8fafc;border-color:#cbd5e1}.search-input{position:relative;width:100%}.search-input .search-icon{color:#94a3b8;left:.75rem;position:absolute;top:50%;transform:translateY(-50%)}.search-input input{background-color:#fff;border:1px solid #e2e8f0;border-radius:.375rem;font-size:.875rem;padding:.5rem 2rem .5rem 2.5rem;width:100%}.search-input input:focus{border-color:#334155;box-shadow:0 0 0 3px rgba(51,65,85,.1);outline:none}.search-input input::-moz-placeholder{color:#94a3b8}.search-input input::placeholder{color:#94a3b8}.search-input .clear-button{background:none;border:none;color:#94a3b8;cursor:pointer;padding:.25rem;position:absolute;right:.75rem;top:50%;transform:translateY(-50%)}.search-input .clear-button:hover{color:#64748b}.select-wrapper select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #e2e8f0;border-radius:.375rem;color:#334155;cursor:pointer;font-size:.875rem;padding:.5rem 2.5rem .5rem .75rem;transition:all .2s;width:100%}.select-wrapper select:focus{border-color:#334155;box-shadow:0 0 0 3px rgba(51,65,85,.1);outline:none}.pagination .page-number{align-items:center;background:#fff;border:1px solid #e2e8f0;border-radius:.375rem;cursor:pointer;display:flex;height:2rem;justify-content:center;transition:all .2s;width:2rem}.pagination .page-number:hover{background:#f8fafc}.pagination .page-number.active{background:#334155;border-color:#334155;color:#fff}.selector-container{align-items:center;display:flex;flex-wrap:wrap;gap:1rem}.selector-container .new-product-btn{align-items:center;background:#334155;border:none;border-radius:.375rem;color:#fff;cursor:pointer;display:flex;font-size:.875rem;gap:.5rem;margin-left:auto;padding:.5rem 1rem;transition:all .2s}.selector-container .new-product-btn:hover{background:#1e293b;transform:translateY(-1px)}.selector-container .new-product-btn i{font-size:.75rem}.cancel-btn,.delete-btn,.edit-btn,.save-btn{justify-content:center;text-align:center}.edit-btn{align-items:center;display:flex;gap:.5rem}.clear-filter-btn{background:none;border:none;color:#94a3b8;cursor:pointer;font-size:.875rem;transition:all .2s}.clear-filter-btn:hover,.helper-text{color:#64748b}.helper-text{display:block;font-size:.75rem;margin-top:.25rem}.mt-4{margin-top:1rem}.editor-image{display:flex;justify-content:center;margin-bottom:1.5rem}.editor-image .image-container{align-items:center;display:flex;flex-direction:column;gap:.5rem;max-width:300px;width:100%}.editor-image .remove-image-btn{align-items:center;background:none;border:none;color:#ef4444;cursor:pointer;display:flex;font-size:.875rem;gap:.5rem;padding:.25rem .5rem;transition:all .2s}.editor-image .remove-image-btn:hover{color:#dc2626;-webkit-text-decoration:underline;text-decoration:underline}.editor-image .remove-image-btn i{font-size:.75rem}',""]),n.locals={},e.exports=n},847:function(e,t,r){"use strict";r.r(t);r(50),r(41),r(13),r(27),r(28),r(43),r(508),r(42),r(37),r(51),r(52);var n=r(79),o=r(10),c=r(0),d=(r(9),r(57),r(61),r(196),r(68),r(33),r(26),r(98),r(30),r(31),r(514),r(149),r(29),r(62),r(308),r(494)),l=r(93),m=r.n(l),f=(r(200),r(497)),v=r(6);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={components:{AdminPage:d.default,LoginModal:f.default},data:function(){return{showLogin:!1,selectedStore:null,products:[],draggingProducts:{},uploadingFor:null,productFilter:"",imageDimensions:{},currentPage:1,itemsPerPage:10,selectedProduct:null,isSaving:!1}},computed:{filteredProducts:function(){if(!this.productFilter)return this.sortProductsByDate(this.products);var filter=this.productFilter.toLowerCase();return this.sortProductsByDate(this.products.filter((function(p){return p.name.toLowerCase().includes(filter)})))},paginatedProducts:function(){var e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredProducts.slice(e,t)},totalPages:function(){return Math.ceil(this.filteredProducts.length/this.itemsPerPage)},priceDisplay:function(){var e;return null!==(e=this.selectedProduct)&&void 0!==e&&e.amount?(this.selectedProduct.amount/100).toFixed(2):""},finalTablePriceDisplay:function(){var e;return null!==(e=this.selectedProduct)&&void 0!==e&&e.tablePriceEnabled?((this.selectedProduct.amount+this.selectedProduct.tableAdditionalAmount)/100).toFixed(2):""},finalDeliveryPriceDisplay:function(){var e;return null!==(e=this.selectedProduct)&&void 0!==e&&e.deliveryPriceEnabled?((this.selectedProduct.amount+this.selectedProduct.deliveryAdditionalAmount)/100).toFixed(2):""},canSave:function(){var e;return null===(e=this.selectedProduct)||void 0===e||null===(e=e.name)||void 0===e?void 0:e.trim()}},watch:{selectedStore:function(e){window&&window.localStorage&&localStorage.setItem("selectedStore",e),e>0?(this.currentPage=1,this.loadProducts()):this.products=[]},productFilter:function(){this.currentPage=1},itemsPerPage:function(){this.currentPage=1},selectedProduct:function(e){window.innerWidth<=768&&(document.body.style.overflow=e?"hidden":"");var t=document.querySelector(".container");t&&t.classList.toggle("editor-open",!!e)}},mounted:function(){var e,t;if(this.$store.getters.userIsLoggedIn){var r=localStorage.getItem("selectedStore");r&&null!==(e=this.$store.state.currentUser.adminIn)&&void 0!==e&&e.find((function(e){return e.id===parseInt(r)}))?this.selectedStore=parseInt(r):(null===(t=this.$store.state.currentUser.adminIn)||void 0===t?void 0:t.length)>0&&(this.selectedStore=this.$store.state.currentUser.adminIn[0].id)}else this.showLogin=!0},methods:{closeLoginModal:function(e){if(this.showLogin=!e,e){var t,r,n=localStorage.getItem("selectedStore");n&&null!==(t=this.$store.state.currentUser.adminIn)&&void 0!==t&&t.find((function(e){return e.id===parseInt(n)}))?this.selectedStore=parseInt(n):(null===(r=this.$store.state.currentUser.adminIn)||void 0===r?void 0:r.length)>0&&(this.selectedStore=this.$store.state.currentUser.adminIn[0].id)}},loadProducts:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._productService.GetAll(e.selectedStore);case 3:r=t.sent,e.products=e.sortProductsByDate(r),e.imageDimensions={},r.forEach((function(p){return e.updateImageDimension(p)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Failed to load products:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},handleDrop:function(e,t){var r=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((o=e.dataTransfer.files[0]).type.match(/image\/(jpeg|png)/)){n.next=4;break}return alert("Only JPG and PNG files are allowed"),n.abrupt("return");case 4:if(!(o.size>5242880)){n.next=7;break}return alert("File size must be less than 5MB"),n.abrupt("return");case 7:return r.uploadingFor=t,n.prev=8,n.next=11,r.processImage(o);case 11:return c=n.sent,n.next=14,r.uploadImage(t,c);case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(8),console.error("Failed to upload image:",n.t0),alert("Failed to upload image");case 20:return n.prev=20,r.uploadingFor=null,n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[8,16,20,23]])})))()},triggerFileInput:function(e){var t=this.$refs["fileInput-editor-".concat(e)],r=this.$refs["fileInput-".concat(e)];null!=t&&t[0]?t[0].click():null!=r&&r[0]&&r[0].click()},handleFileSelect:function(e,t){var r=e.target.files[0];if(r){var n={dataTransfer:{files:[r]}};this.handleDrop(n,t),e.target.value=""}},resizeAndUpload:function(e,t){var r=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var o,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.uploadingFor=e,n.prev=1,n.next=4,fetch(t);case 4:return o=n.sent,n.next=7,o.blob();case 7:return c=n.sent,n.next=10,r.processImage(c);case 10:return d=n.sent,n.next=13,r.uploadImage(e,d);case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(1),console.error("Failed to resize and upload image:",n.t0),alert("Failed to resize and upload image");case 19:return n.prev=19,r.uploadingFor=null,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[1,15,19,22]])})))()},processImage:function(e){return Object(c.a)(regeneratorRuntime.mark((function t(){var r,img,canvas,n,o,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=URL.createObjectURL(e),img=new Image,t.next=4,new Promise((function(e,t){img.onload=e,img.onerror=t,img.src=r}));case 4:return canvas=document.createElement("canvas"),n=canvas.getContext("2d"),canvas.width=500,canvas.height=500,o=Math.min(img.width,img.height),c=(img.width-o)/2,d=(img.height-o)/2,n.drawImage(img,c,d,o,o,0,0,500,500),URL.revokeObjectURL(r),t.abrupt("return",new Promise((function(e){return canvas.toBlob(e,"image/jpeg",.9)})));case 14:case"end":return t.stop()}}),t)})))()},uploadImage:function(e,t){var r=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var o,c,d,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(c=new FormData).append("image",t,"image.jpg"),c.append("guidId",e),n.next=5,m.a.post("".concat(v.a.okamApiBaseUrl,"/products/image"),c,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r.$store.state.currentUser.token)}});case 5:return n.next=7,r._productService.GetAll(r.selectedStore);case 7:d=n.sent,r.products=d,(null===(o=r.selectedProduct)||void 0===o?void 0:o.id)===e&&(l=d.find((function(p){return p.id===e})))&&(r.selectedProduct.image=l.image),r.$set(r.imageDimensions,e,"500x500");case 11:case"end":return n.stop()}}),n)})))()},updateImageDimension:function(e){var t,r=this;if(null!==(t=e.image)&&void 0!==t&&t.imageUrl){var img=new Image;img.onload=function(){r.$set(r.imageDimensions,e.id,"".concat(img.width,"x").concat(img.height))},img.src=e.image.imageUrl}},changePage:function(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},editProduct:function(e){this.selectedProduct=JSON.parse(JSON.stringify(e))},saveProduct:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isSaving&&e.canSave){t.next=2;break}return t.abrupt("return");case 2:return e.isSaving=!0,t.prev=3,r=x(x({},e.selectedProduct),{},{name:e.selectedProduct.name.trim()}),t.next=7,e._productService.CreateOrUpdate(r);case 7:return t.next=9,e.loadProducts();case 9:e.productFilter=r.name,e.selectedProduct=null,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.error("Failed to save product:",t.t0),alert("Failed to save product");case 17:return t.prev=17,e.isSaving=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[3,13,17,20]])})))()},handlePriceInput:function(e){var input=e.target,t=input.selectionStart,r=input.value,n=input.value.replace(/[^\d.,]/g,"");if(""!==(n=(n=n.replace(/[.,](?=.*[.,])/g,"")).replace(",","."))){var o=parseFloat(n);if(!isNaN(o)){this.selectedProduct.amount=Math.round(100*o);var c=t+(input.value.length-r.length);this.$nextTick((function(){input.setSelectionRange(c,c)}))}}else this.selectedProduct.amount=0},formatPrice:function(){var e=(this.selectedProduct.amount/100).toFixed(2);event.target.value=e},handleFinalTablePriceInput:function(e){var input=e.target,t=input.selectionStart,r=input.value,n=input.value.replace(/[^\d.,]/g,"");if(""!==(n=(n=n.replace(/[.,](?=.*[.,])/g,"")).replace(",","."))){var o=parseFloat(n);if(!isNaN(o)){var c=Math.round(100*o)-this.selectedProduct.amount;this.selectedProduct.tableAdditionalAmount=Math.max(0,c);var d=t+(input.value.length-r.length);this.$nextTick((function(){input.setSelectionRange(d,d)}))}}else this.selectedProduct.tableAdditionalAmount=0},formatFinalTablePrice:function(){var e=((this.selectedProduct.amount+this.selectedProduct.tableAdditionalAmount)/100).toFixed(2);event.target.value=e},handleFinalDeliveryPriceInput:function(e){var input=e.target,t=input.selectionStart,r=input.value,n=input.value.replace(/[^\d.,]/g,"");if(""!==(n=(n=n.replace(/[.,](?=.*[.,])/g,"")).replace(",","."))){var o=parseFloat(n);if(!isNaN(o)){var c=Math.round(100*o)-this.selectedProduct.amount;this.selectedProduct.deliveryAdditionalAmount=Math.max(0,c);var d=t+(input.value.length-r.length);this.$nextTick((function(){input.setSelectionRange(d,d)}))}}else this.selectedProduct.deliveryAdditionalAmount=0},formatFinalDeliveryPrice:function(){var e=((this.selectedProduct.amount+this.selectedProduct.deliveryAdditionalAmount)/100).toFixed(2);event.target.value=e},confirmDelete:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm("Er du sikker p√• at du vil slette dette produktet?")){t.next=2;break}return t.abrupt("return");case 2:return e.isSaving=!0,t.prev=3,t.next=6,e._productService.Delete(e.selectedProduct.id);case 6:return t.next=8,e.loadProducts();case 8:e.selectedProduct=null,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error("Failed to delete product:",t.t0),alert("Kunne ikke slette produktet");case 15:return t.prev=15,e.isSaving=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},createNewProduct:function(){this.selectedProduct={name:"",storeId:this.selectedStore,description:"",otherInformation:"",amount:0,currency:"NOK",tax:15,tablePriceEnabled:!1,tableAdditionalAmount:0,tableTax:25,deliveryPriceEnabled:!1,deliveryAdditionalAmount:0,deliveryTax:15}},removeImage:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t._productService.DeleteImage(e);case 3:return r.next=5,t._productService.GetAll(t.selectedStore);case 5:o=r.sent,t.products=o,(null===(n=t.selectedProduct)||void 0===n?void 0:n.id)===e&&o.find((function(p){return p.id===e}))&&(t.selectedProduct.image=null),t.$delete(t.imageDimensions,e),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.error("Failed to remove image:",r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},sortProductsByDate:function(e){return e.some((function(p){return p.createdAt&&"0001-01-01T00:00:00"!==p.createdAt}))?Object(n.a)(e).sort((function(a,b){var e=a.createdAt&&"0001-01-01T00:00:00"!==a.createdAt?a.createdAt:"9999-12-31T23:59:59.9999999",t=b.createdAt&&"0001-01-01T00:00:00"!==b.createdAt?b.createdAt:"9999-12-31T23:59:59.9999999";return e<t?-1:e>t?1:0})):e}}},y=(r(752),r(78)),component=Object(y.a)(P,(function(){var e,t,r=this,n=r._self._c;return n("AdminPage",[n("div",{staticClass:"container"},[n("div",[n("h1",{staticStyle:{"margin-bottom":"0.5em"}},[r._v("Produkter")]),r._v(" "),n("p",{staticStyle:{"margin-bottom":"1.5em"}},[r._v("Et verkt√∏y for √• enkelt kunne redigere produkter p√• PC")])]),r._v(" "),n("div",{staticClass:"store-selector"},[n("div",{staticClass:"selector-container"},[n("div",{staticClass:"select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:r.selectedStore,expression:"selectedStore"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));r.selectedStore=e.target.multiple?t:t[0]}}},r._l(r.$store.state.currentUser.adminIn,(function(option){return n("option",{key:option.id,domProps:{value:option.id}},[r._v("\n              "+r._s(option.name)+" ("+r._s(option.id)+")\n            ")])})),0)]),r._v(" "),n("div",{staticClass:"filter-wrapper"},[n("div",{staticClass:"search-input"},[n("span",{staticClass:"search-icon"},[r._v("üîç")]),r._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:r.productFilter,expression:"productFilter"}],staticClass:"product-filter",attrs:{type:"text",placeholder:"Filtrer produkter..."},domProps:{value:r.productFilter},on:{input:function(e){e.target.composing||(r.productFilter=e.target.value)}}}),r._v(" "),r.productFilter?n("button",{staticClass:"clear-button",on:{click:function(e){r.productFilter=""}}},[r._v("\n              ‚úï\n            ")]):r._e()])]),r._v(" "),n("div",{staticClass:"select-wrapper items-per-page"},[n("select",{directives:[{name:"model",rawName:"v-model",value:r.itemsPerPage,expression:"itemsPerPage"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));r.itemsPerPage=e.target.multiple?t:t[0]}}},r._l([10,25,50,100,200],(function(e){return n("option",{key:e,domProps:{value:e}},[r._v("\n              "+r._s(e)+" per side\n            ")])})),0)]),r._v(" "),n("button",{staticClass:"new-product-btn",on:{click:r.createNewProduct}},[n("i",{staticClass:"fas fa-plus"}),r._v(" Nytt produkt\n        ")])])]),r._v(" "),n("div",{staticClass:"results-count"},[r._v("\n      Viser "+r._s(r.paginatedProducts.length)+" av "+r._s(r.products.length)+" produkter\n      "),r.productFilter?n("button",{staticClass:"clear-filter-btn",on:{click:function(e){r.productFilter=""}}},[r._v("\n        Fjern filter p√• '"+r._s(r.productFilter)+"'\n      ")]):r._e()]),r._v(" "),n("div",{staticClass:"products-grid"},r._l(r.paginatedProducts,(function(e){var t;return n("div",{key:e.id,staticClass:"product-card"},[n("div",{staticClass:"product-image",class:{dragging:r.draggingProducts[e.id]},on:{dragover:function(t){t.preventDefault(),r.draggingProducts[e.id]=!0},dragleave:function(t){t.preventDefault(),r.draggingProducts[e.id]=!1},drop:function(t){t.preventDefault(),r.handleDrop(t,e.id),r.draggingProducts[e.id]=!1},click:function(t){return r.triggerFileInput(e.id)}}},[n("input",{ref:"fileInput-".concat(e.id),refInFor:!0,staticClass:"hidden-file-input",attrs:{type:"file",accept:"image/jpeg,image/png"},on:{change:function(t){return r.handleFileSelect(t,e.id)}}}),r._v(" "),r.uploadingFor===e.id?n("div",{staticClass:"loading-overlay"},[n("i",{staticClass:"fas fa-spinner fa-spin"})]):r._e(),r._v(" "),null!==(t=e.image)&&void 0!==t&&t.imageUrl?n("div",[n("img",{attrs:{src:e.image.imageUrl,alt:e.name}}),r._v(" "),r.imageDimensions[e.id]?n("div",{staticClass:"dimension-tag"},[r._v("\n              "+r._s(r.imageDimensions[e.id])+"\n            ")]):r._e()]):n("div",{staticClass:"no-image"},[n("i",{staticClass:"fas fa-cloud-upload-alt"}),r._v(" "),n("span",[r._v("Slipp bilde her")])])]),r._v(" "),n("div",{staticClass:"product-info"},[n("h3",[r._v(r._s(e.name))]),r._v(" "),n("p",[r._v(r._s(e.description))]),r._v(" "),n("div",{staticClass:"price-container"},[n("div",{staticClass:"price"},[r._v(r._s((e.amount/100).toFixed(2))+" "+r._s(e.currency))]),r._v(" "),e.tablePriceEnabled?n("div",{staticClass:"table-price"},[n("span",{staticClass:"table-label"},[r._v("Spis inne:")]),r._v("\n              "+r._s(((e.amount+e.tableAdditionalAmount)/100).toFixed(2))+" "+r._s(e.currency)+"\n            ")]):r._e()]),r._v(" "),n("button",{staticClass:"edit-btn",on:{click:function(t){return r.editProduct(e)}}},[n("i",{staticClass:"fas fa-edit"}),r._v(" Rediger\n          ")])])])})),0),r._v(" "),r.totalPages>1?n("div",{staticClass:"pagination"},[n("button",{staticClass:"pagination-btn",attrs:{disabled:1===r.currentPage},on:{click:function(e){return r.changePage(r.currentPage-1)}}},[r._v("\n        Forrige\n      ")]),r._v(" "),n("div",{staticClass:"page-numbers"},r._l(r.totalPages,(function(e){return n("button",{key:e,class:["page-number",{active:e===r.currentPage}],on:{click:function(t){return r.changePage(e)}}},[r._v("\n          "+r._s(e)+"\n        ")])})),0),r._v(" "),n("button",{staticClass:"pagination-btn",attrs:{disabled:r.currentPage===r.totalPages},on:{click:function(e){return r.changePage(r.currentPage+1)}}},[r._v("\n        Neste\n      ")])]):r._e(),r._v(" "),r.showLogin?n("LoginModal",{on:{close:r.closeLoginModal}}):r._e(),r._v(" "),n("div",{staticClass:"product-editor",class:{"is-open":r.selectedProduct}},[r.selectedProduct?n("div",{staticClass:"editor-content"},[n("div",{staticClass:"editor-header"},[n("h2",[r._v("Rediger produkt")]),r._v(" "),n("button",{staticClass:"close-btn",on:{click:function(e){r.selectedProduct=null}}},[r._v("\n            ‚úï\n          ")])]),r._v(" "),n("div",{staticClass:"editor-body"},[n("div",{staticClass:"editor-image"},[n("div",{staticClass:"image-container"},[n("div",{staticClass:"product-image",class:{dragging:r.draggingProducts[r.selectedProduct.id]},on:{dragover:function(e){e.preventDefault(),r.draggingProducts[r.selectedProduct.id]=!0},dragleave:function(e){e.preventDefault(),r.draggingProducts[r.selectedProduct.id]=!1},drop:function(e){e.preventDefault(),r.handleDrop(e,r.selectedProduct.id),r.draggingProducts[r.selectedProduct.id]=!1},click:function(e){return r.triggerFileInput(r.selectedProduct.id)}}},[n("input",{ref:"fileInput-editor-".concat(r.selectedProduct.id),staticClass:"hidden-file-input",attrs:{type:"file",accept:"image/jpeg,image/png"},on:{change:function(e){return r.handleFileSelect(e,r.selectedProduct.id)}}}),r._v(" "),r.uploadingFor===r.selectedProduct.id?n("div",{staticClass:"loading-overlay"},[n("i",{staticClass:"fas fa-spinner fa-spin"})]):r._e(),r._v(" "),null!==(e=r.selectedProduct.image)&&void 0!==e&&e.imageUrl?n("div",[n("img",{attrs:{src:r.selectedProduct.image.imageUrl,alt:r.selectedProduct.name}}),r._v(" "),r.imageDimensions[r.selectedProduct.id]?n("div",{staticClass:"dimension-tag"},[r._v("\n                    "+r._s(r.imageDimensions[r.selectedProduct.id])+"\n                  ")]):r._e()]):n("div",{staticClass:"no-image"},[n("i",{staticClass:"fas fa-cloud-upload-alt"}),r._v(" "),n("span",[r._v("Slipp bilde her")])])]),r._v(" "),null!==(t=r.selectedProduct.image)&&void 0!==t&&t.imageUrl?n("button",{staticClass:"remove-image-btn",on:{click:function(e){return e.stopPropagation(),r.removeImage(r.selectedProduct.id)}}},[r._v("\n                Slett bilde\n              ")]):r._e()])]),r._v(" "),n("div",{staticClass:"form-group"},[n("label",[r._v("Navn")]),r._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:r.selectedProduct.name,expression:"selectedProduct.name"}],attrs:{type:"text"},domProps:{value:r.selectedProduct.name},on:{input:function(e){e.target.composing||r.$set(r.selectedProduct,"name",e.target.value)}}})]),r._v(" "),n("div",{staticClass:"form-group"},[n("label",[r._v("Beskrivelse")]),r._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:r.selectedProduct.description,expression:"selectedProduct.description"}],attrs:{rows:"3"},domProps:{value:r.selectedProduct.description},on:{input:function(e){e.target.composing||r.$set(r.selectedProduct,"description",e.target.value)}}})]),r._v(" "),n("div",{staticClass:"form-group"},[n("label",[r._v("Allergener")]),r._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:r.selectedProduct.otherInformation,expression:"selectedProduct.otherInformation"}],attrs:{rows:"2",placeholder:"F.eks: Inneholder gluten, melk, egg"},domProps:{value:r.selectedProduct.otherInformation},on:{input:function(e){e.target.composing||r.$set(r.selectedProduct,"otherInformation",e.target.value)}}})]),r._v(" "),n("div",{staticClass:"form-group"},[n("label",[r._v("Pris (NOK)")]),r._v(" "),n("input",{attrs:{type:"text",inputmode:"decimal",placeholder:"0.00"},domProps:{value:r.priceDisplay},on:{input:r.handlePriceInput,blur:r.formatPrice}})]),r._v(" "),n("div",{staticClass:"form-group"},[n("label",[r._v("MVA (%)")]),r._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:r.selectedProduct.tax,expression:"selectedProduct.tax",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"100",placeholder:"15"},domProps:{value:r.selectedProduct.tax},on:{input:function(e){e.target.composing||r.$set(r.selectedProduct,"tax",r._n(e.target.value))},blur:function(e){return r.$forceUpdate()}}}),r._v(" "),n("span",{staticClass:"helper-text"},[r._v("Vanligvis 15% for takeaway")])]),r._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"checkbox-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.selectedProduct.tablePriceEnabled,expression:"selectedProduct.tablePriceEnabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(r.selectedProduct.tablePriceEnabled)?r._i(r.selectedProduct.tablePriceEnabled,null)>-1:r.selectedProduct.tablePriceEnabled},on:{change:function(e){var t=r.selectedProduct.tablePriceEnabled,n=e.target,o=!!n.checked;if(Array.isArray(t)){var c=r._i(t,null);n.checked?c<0&&r.$set(r.selectedProduct,"tablePriceEnabled",t.concat([null])):c>-1&&r.$set(r.selectedProduct,"tablePriceEnabled",t.slice(0,c).concat(t.slice(c+1)))}else r.$set(r.selectedProduct,"tablePriceEnabled",o)}}}),r._v("\n              Egen pris for 'Spis inne'\n            ")]),r._v(" "),r.selectedProduct.tablePriceEnabled?n("div",[n("label",[r._v("Spis inne pris (NOK)")]),r._v(" "),n("input",{attrs:{type:"text",inputmode:"decimal",placeholder:"0.00"},domProps:{value:r.finalTablePriceDisplay},on:{input:r.handleFinalTablePriceInput,blur:r.formatFinalTablePrice}}),r._v(" "),n("label",{staticClass:"mt-4"},[r._v("Spis inne MVA (%)")]),r._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:r.selectedProduct.tableTax,expression:"selectedProduct.tableTax",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"100",placeholder:"25"},domProps:{value:r.selectedProduct.tableTax},on:{input:function(e){e.target.composing||r.$set(r.selectedProduct,"tableTax",r._n(e.target.value))},blur:function(e){return r.$forceUpdate()}}}),r._v(" "),n("span",{staticClass:"helper-text"},[r._v("Vanligvis 25% for spis inne")])]):r._e()]),r._v(" "),n("div",{staticClass:"form-group"},[n("label",{staticClass:"checkbox-label"},[n("input",{directives:[{name:"model",rawName:"v-model",value:r.selectedProduct.deliveryPriceEnabled,expression:"selectedProduct.deliveryPriceEnabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(r.selectedProduct.deliveryPriceEnabled)?r._i(r.selectedProduct.deliveryPriceEnabled,null)>-1:r.selectedProduct.deliveryPriceEnabled},on:{change:function(e){var t=r.selectedProduct.deliveryPriceEnabled,n=e.target,o=!!n.checked;if(Array.isArray(t)){var c=r._i(t,null);n.checked?c<0&&r.$set(r.selectedProduct,"deliveryPriceEnabled",t.concat([null])):c>-1&&r.$set(r.selectedProduct,"deliveryPriceEnabled",t.slice(0,c).concat(t.slice(c+1)))}else r.$set(r.selectedProduct,"deliveryPriceEnabled",o)}}}),r._v("\n              Egen pris for 'Hjemlevering'\n            ")]),r._v(" "),r.selectedProduct.deliveryPriceEnabled?n("div",[n("label",[r._v("Hjemlevering pris (NOK)")]),r._v(" "),n("input",{attrs:{type:"text",inputmode:"decimal",placeholder:"0.00"},domProps:{value:r.finalDeliveryPriceDisplay},on:{input:r.handleFinalDeliveryPriceInput,blur:r.formatFinalDeliveryPrice}}),r._v(" "),n("label",{staticClass:"mt-4"},[r._v("Hjemlevering MVA (%)")]),r._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:r.selectedProduct.deliveryTax,expression:"selectedProduct.deliveryTax",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"100",placeholder:"15"},domProps:{value:r.selectedProduct.deliveryTax},on:{input:function(e){e.target.composing||r.$set(r.selectedProduct,"deliveryTax",r._n(e.target.value))},blur:function(e){return r.$forceUpdate()}}}),r._v(" "),n("span",{staticClass:"helper-text"},[r._v("Vanligvis 15% for hjemlevering")])]):r._e()]),r._v(" "),n("p",{staticClass:"results-count"},[r._v("For andre produktendringer (som f.eks varianter), vennligst bruk Okam Admin appen.")])]),r._v(" "),n("div",{staticClass:"editor-actions"},[n("button",{staticClass:"save-btn",attrs:{disabled:r.isSaving||!r.canSave},on:{click:r.saveProduct}},[n("span",[r._v(r._s(r.isSaving?"Lagrer...":"Lagre endringer"))])]),r._v(" "),n("button",{staticClass:"cancel-btn",on:{click:function(e){r.selectedProduct=null}}},[r._v("\n            Avbryt\n          ")]),r._v(" "),r.selectedProduct.id?n("button",{staticClass:"delete-btn",attrs:{disabled:r.isSaving},on:{click:r.confirmDelete}},[r._v("\n            Slett\n          ")]):r._e()])]):r._e()])],1)])}),[],!1,null,null,null);t.default=component.exports}}]);