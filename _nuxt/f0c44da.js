(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{570:function(e,t,n){var content=n(741);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(120).default)("1977421e",content,!0,{sourceMap:!1})},740:function(e,t,n){"use strict";n(570)},741:function(e,t,n){var o=n(119)((function(i){return i[1]}));o.push([e.i,'.opening-hours[data-v-085ec4b2]{padding:2rem}.opening-hours__title[data-v-085ec4b2]{color:#2d3748;font-size:2rem;margin-bottom:2rem}.opening-hours__loading[data-v-085ec4b2]{display:flex;justify-content:center;padding:2rem 0}.store-selector-wrapper[data-v-085ec4b2]{margin-bottom:2rem}.select-wrapper[data-v-085ec4b2]{display:inline-block;position:relative}.select-wrapper select[data-v-085ec4b2]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #e2e8f0;border-radius:.25rem;font-size:1rem;min-width:250px;padding:.5rem 2rem .5rem .75rem}.select-wrapper[data-v-085ec4b2]:after{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #4a5568;content:"";height:0;pointer-events:none;position:absolute;right:.75rem;top:50%;transform:translateY(-50%);width:0}.opening-hours__items[data-v-085ec4b2]{border-top:1px solid #e2e8f0}.opening-hours__item[data-v-085ec4b2]{align-items:center;border-bottom:1px solid #e2e8f0;display:flex;padding:1.5rem 0}.opening-hours__day[data-v-085ec4b2]{flex:1}.opening-hours__day-label[data-v-085ec4b2]{font-size:1rem;font-weight:500}.opening-hours__time[data-v-085ec4b2]{flex:2}.opening-hours__time-inputs[data-v-085ec4b2]{align-items:center;display:flex}.opening-hours__time-input[data-v-085ec4b2]{border:1px solid #e2e8f0;border-radius:.25rem;font-size:1rem;padding:.5rem}.opening-hours__time-separator[data-v-085ec4b2]{margin:0 .5rem}.opening-hours__closed[data-v-085ec4b2]{color:#a0aec0;flex:2}.opening-hours__toggle[data-v-085ec4b2]{flex:0 0 60px;text-align:right}.opening-hours__no-store[data-v-085ec4b2]{color:#a0aec0;padding:2rem 0;text-align:center}.opening-hours__info[data-v-085ec4b2]{background-color:#f7fafc;border-radius:.25rem;color:#4a5568;margin-top:2rem;padding:1rem}.switch[data-v-085ec4b2]{display:inline-block;height:24px;position:relative;width:50px}.switch input[data-v-085ec4b2]{height:0;opacity:0;width:0}.slider[data-v-085ec4b2]{background-color:#cbd5e0;bottom:0;cursor:pointer;left:0;right:0;top:0}.slider[data-v-085ec4b2],.slider[data-v-085ec4b2]:before{position:absolute;transition:.4s}.slider[data-v-085ec4b2]:before{background-color:#fff;bottom:4px;content:"";height:16px;left:4px;width:16px}input:checked+.slider[data-v-085ec4b2]{background-color:#1bb776}input:focus+.slider[data-v-085ec4b2]{box-shadow:0 0 1px #1bb776}input:checked+.slider[data-v-085ec4b2]:before{transform:translateX(26px)}.slider.round[data-v-085ec4b2]{border-radius:24px}.slider.round[data-v-085ec4b2]:before{border-radius:50%}',""]),o.locals={},e.exports=o},843:function(e,t,n){"use strict";n.r(t);n(50),n(41),n(13),n(27),n(42),n(37),n(34),n(68),n(29);var o=n(494),r=n(495),d=n(497),l={name:"OpeningHours",components:{AdminPage:o.default,Loading:r.default,LoginModal:d.default},data:function(){return{localOpeningHours:[],isLoading:!1,selectedStore:null,dayLabels:["Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag","Søndag"],showLogin:!1}},watch:{selectedStore:function(e){e>0?this.fetchStoreData(e):this.localOpeningHours=[],window&&window.localStorage&&localStorage.setItem("openingHoursSelectedStore",e)}},mounted:function(){var e=this;this.$store.getters.userIsLoggedIn?this._userService.Reload().then((function(t){var n;t?(e.init(),!e.selectedStore&&null!==(n=e.$store.state.currentUser.adminIn)&&void 0!==n&&n.length&&(e.selectedStore=e.$store.state.currentUser.adminIn[0].id)):e.showLogin=!0})).catch((function(t){console.error("Error fetching user data:",t),e.showLogin=!0})):this.showLogin=!0},methods:{init:function(){if(window&&window.localStorage){var e,t=localStorage.getItem("openingHoursSelectedStore");t?this.selectedStore=parseInt(t):null!==(e=this.$store.state.currentUser.adminIn)&&void 0!==e&&e.length&&(this.selectedStore=this.$store.state.currentUser.adminIn[0].id,localStorage.setItem("openingHoursSelectedStore",this.selectedStore.toString()))}},closeLoginModal:function(e){var t;(this.showLogin=!e,e)&&(this.init(),!this.selectedStore&&null!==(t=this.$store.state.currentUser.adminIn)&&void 0!==t&&t.length&&(this.selectedStore=this.$store.state.currentUser.adminIn[0].id))},fetchStoreData:function(e){var t=this;e&&(this.isLoading=!0,this._storeService.Get(e).then((function(e){t.updateLocalOpeningHours(e),t.isLoading=!1})).catch((function(e){console.error("Error fetching store data:",e),t.isLoading=!1,alert("Kunne ikke hente butikkdata. Vennligst prøv igjen senere.")})))},updateLocalOpeningHours:function(e){var t=this,n=e.openingHours||[];this.localOpeningHours=[],[0,1,2,3,4,5,6].forEach((function(e){var o=n.find((function(t){return t.dayOfWeek===e}))||{dayOfWeek:e,openingTime:"09:00",closingTime:"20:00",open:!1};t.localOpeningHours.push(o)}))},updateOpeningHours:function(){this.selectedStore&&this._storeService.UpdateOpeningHours(this.selectedStore,JSON.parse(JSON.stringify(this.localOpeningHours))).then((function(e){e||alert("Kunne ikke oppdatere åpningstider. Vennligst prøv igjen senere.")})).catch((function(e){console.error("Error updating opening hours:",e),alert("Kunne ikke oppdatere åpningstider. Vennligst prøv igjen senere.")}))}}},c=(n(740),n(78)),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("AdminPage",[t("div",{staticClass:"opening-hours"},[t("h1",{staticClass:"opening-hours__title"},[e._v("Åpningstider")]),e._v(" "),e.isLoading?t("div",{staticClass:"opening-hours__loading"},[t("Loading",{attrs:{loading:!0}})],1):t("div",{staticClass:"opening-hours__content"},[t("div",{staticClass:"store-selector-wrapper"},[t("div",{staticClass:"select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedStore,expression:"selectedStore"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedStore=t.target.multiple?n:n[0]}}},e._l(e.$store.state.currentUser.adminIn,(function(option){return t("option",{key:option.id,domProps:{value:option.id}},[e._v("\n              "+e._s(option.name)+" ("+e._s(option.id)+")\n            ")])})),0)])]),e._v(" "),e.selectedStore>0?t("div",{staticClass:"opening-hours__items"},e._l(e.localOpeningHours,(function(n,o){return t("div",{key:o,staticClass:"opening-hours__item"},[t("div",{staticClass:"opening-hours__day"},[t("span",{staticClass:"opening-hours__day-label"},[e._v(e._s(e.dayLabels[n.dayOfWeek]))])]),e._v(" "),n.open?t("div",{staticClass:"opening-hours__time"},[t("div",{staticClass:"opening-hours__time-inputs"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.openingTime,expression:"item.openingTime"}],staticClass:"opening-hours__time-input",attrs:{type:"time"},domProps:{value:n.openingTime},on:{change:e.updateOpeningHours,input:function(t){t.target.composing||e.$set(n,"openingTime",t.target.value)}}}),e._v(" "),t("span",{staticClass:"opening-hours__time-separator"},[e._v("-")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.closingTime,expression:"item.closingTime"}],staticClass:"opening-hours__time-input",attrs:{type:"time"},domProps:{value:n.closingTime},on:{change:e.updateOpeningHours,input:function(t){t.target.composing||e.$set(n,"closingTime",t.target.value)}}})])]):t("div",{staticClass:"opening-hours__closed"},[t("span",[e._v("Stengt")])]),e._v(" "),t("div",{staticClass:"opening-hours__toggle"},[t("label",{staticClass:"switch"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.open,expression:"item.open"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.open)?e._i(n.open,null)>-1:n.open},on:{change:[function(t){var o=n.open,r=t.target,d=!!r.checked;if(Array.isArray(o)){var l=e._i(o,null);r.checked?l<0&&e.$set(n,"open",o.concat([null])):l>-1&&e.$set(n,"open",o.slice(0,l).concat(o.slice(l+1)))}else e.$set(n,"open",d)},e.updateOpeningHours]}}),e._v(" "),t("span",{staticClass:"slider round"})])])])})),0):t("div",{staticClass:"opening-hours__no-store"},[t("p",[e._v("Velg en butikk for å administrere åpningstider.")])]),e._v(" "),t("div",{staticClass:"opening-hours__info"},[t("p",[e._v("Åpningstidene brukes til å vise når butikken din er åpen for bestillinger.")])])])]),e._v(" "),e.showLogin?t("LoginModal",{on:{close:e.closeLoginModal}}):e._e()],1)}),[],!1,null,"085ec4b2",null);t.default=component.exports}}]);