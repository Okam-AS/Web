(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{580:function(t,e,n){var content=n(762);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(120).default)("4bbf89d4",content,!0,{sourceMap:!1})},761:function(t,e,n){"use strict";n(580)},762:function(t,e,n){var r=n(119)((function(i){return i[1]}));r.push([t.i,'.pending-settlements[data-v-82964fec]{margin:0 auto;max-width:1400px;padding:20px}.page-header[data-v-82964fec]{margin-bottom:30px;text-align:center}.page-header h1[data-v-82964fec]{color:#292c34;font-size:2.5em;margin-bottom:10px}.page-description[data-v-82964fec]{color:#666;font-size:1.1em;margin:0}.filters-section[data-v-82964fec]{align-items:flex-end;background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);display:flex;flex-wrap:wrap;gap:30px;margin-bottom:30px;padding:20px}.loading-section[data-v-82964fec]{align-items:center;display:flex;justify-content:center;margin-bottom:30px;min-height:200px}.filter-group[data-v-82964fec]{display:flex;flex-direction:column;gap:8px;min-width:200px}.filter-group label[data-v-82964fec]{color:#292c34;font-weight:500}.select-wrapper[data-v-82964fec]{display:inline-block;min-width:200px;position:relative}.select-wrapper select[data-v-82964fec]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border:1px solid #ddd;border-radius:4px;color:#334155;cursor:pointer;font-size:1em;padding:10px 2.5rem 10px 10px;transition:all .2s;width:100%}.select-wrapper select[data-v-82964fec]:focus{border-color:#1bb776;outline:none}.select-wrapper[data-v-82964fec]:after{content:"üè†";pointer-events:none;position:absolute;right:.75rem;top:50%;transform:translateY(-50%)}.date-filters[data-v-82964fec]{display:flex;gap:20px}.date-input[data-v-82964fec]{display:flex;flex-direction:column;gap:8px}.date-input label[data-v-82964fec]{color:#292c34;font-size:.9em;font-weight:500}.date-input input[data-v-82964fec]{border:1px solid #ddd;border-radius:4px;font-size:1em;padding:10px}.date-input input[data-v-82964fec]:focus{border-color:#1bb776;outline:none}.summary-section[data-v-82964fec]{margin-bottom:30px}.summary-cards[data-v-82964fec]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.summary-card[data-v-82964fec]{background:#fff;border-left:4px solid #ddd;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:20px;text-align:center}.summary-card.settled[data-v-82964fec]{border-left-color:#1bb776}.summary-card.pending[data-v-82964fec]{border-left-color:#ff9800}.summary-card h3[data-v-82964fec]{color:#666;font-size:1em;margin:0 0 10px}.stat-value[data-v-82964fec]{color:#292c34;font-size:2em;font-weight:700;margin-bottom:5px}.stat-amount[data-v-82964fec]{color:#1bb776;font-size:1.1em;font-weight:500}.pending-orders-section[data-v-82964fec],.settlements-section[data-v-82964fec]{background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);margin-bottom:30px;padding:20px}.pending-orders-section h2[data-v-82964fec],.settlements-section h2[data-v-82964fec]{color:#292c34;margin:0 0 20px}.table-container[data-v-82964fec]{overflow-x:auto}.orders-table[data-v-82964fec]{border-collapse:collapse;font-size:.9em;width:100%}.orders-table td[data-v-82964fec],.orders-table th[data-v-82964fec]{border-bottom:1px solid #eee;padding:12px;text-align:left}.orders-table th[data-v-82964fec]{color:#292c34;font-weight:600;position:sticky;top:0}.order-row[data-v-82964fec]:hover,.orders-table th[data-v-82964fec]{background:#f8f9fa}.order-id[data-v-82964fec]{color:#1bb776;font-weight:600}.amount[data-v-82964fec]{font-weight:600;text-align:right}.settlements-grid[data-v-82964fec]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}.settlement-card[data-v-82964fec]{background:#f8f9fa;border-left:4px solid #1bb776;border-radius:8px;padding:20px}.settlement-header[data-v-82964fec]{align-items:center;display:flex;justify-content:space-between;margin-bottom:15px}.settlement-header h3[data-v-82964fec]{color:#292c34;font-size:1.1em;margin:0}.settlement-date[data-v-82964fec]{color:#666;font-size:.9em}.settlement-details[data-v-82964fec]{display:flex;flex-direction:column;gap:8px}.settlement-amount[data-v-82964fec]{color:#1bb776;font-size:1.5em;font-weight:700}.settlement-count[data-v-82964fec]{color:#666;font-size:.9em}.settlement-period[data-v-82964fec]{color:#666;font-size:.8em;font-style:italic}.empty-state[data-v-82964fec]{color:#666;padding:60px 20px;text-align:center}.empty-icon[data-v-82964fec]{font-size:4em;margin-bottom:20px}.empty-state h3[data-v-82964fec]{color:#292c34;margin:0 0 10px}.empty-state p[data-v-82964fec]{font-size:1.1em;margin:0}@media (max-width:768px){.pending-settlements[data-v-82964fec]{padding:10px}.filters-section[data-v-82964fec]{align-items:stretch;flex-direction:column;gap:20px}.date-filters[data-v-82964fec]{flex-direction:column;gap:15px}.settlements-grid[data-v-82964fec],.summary-cards[data-v-82964fec]{grid-template-columns:1fr}.orders-table[data-v-82964fec]{font-size:.8em}.orders-table td[data-v-82964fec],.orders-table th[data-v-82964fec]{padding:8px}}',""]),r.locals={},t.exports=r},850:function(t,e,n){"use strict";n.r(e);n(50),n(41),n(13),n(27);var r=n(0),o=(n(9),n(494)),d=n(495),l={name:"PendingSettlements",components:{AdminPage:o.default,Loading:d.default},data:function(){return{isLoading:!1,selectedStoreId:"",settlementData:null,dateRange:{from:this.getDefaultFromDate(),to:this.getDefaultToDate()}}},computed:{availableStores:function(){var t;return(null===(t=this.$store.state.currentUser)||void 0===t?void 0:t.adminIn)||[]}},watch:{availableStores:{handler:function(t){t&&t.length>0&&!this.selectedStoreId&&(this.selectedStoreId=t[0].id,this.loadData())},immediate:!0}},mounted:function(){this.$store.getters.userIsLoggedIn&&this.initializePage()},methods:{initializePage:function(){1===this.availableStores.length&&(this.selectedStoreId=this.availableStores[0].id,this.loadData())},getDefaultFromDate:function(){var t=new Date,e=t.getDay(),n=0===e?20:e+13;return t.setDate(t.getDate()-n),t.toISOString().split("T")[0]},getDefaultToDate:function(){var t=new Date,e=t.getDay(),n=0===e?14:e+7;return t.setDate(t.getDate()-n),t.toISOString().split("T")[0]},loadData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedStoreId){e.next=3;break}return t.settlementData=null,e.abrupt("return");case 3:return t.isLoading=!0,e.prev=4,n={StoreId:parseInt(t.selectedStoreId),from:t.dateRange.from,to:t.dateRange.to},e.next=8,t._statisticsService.GetPendingSettlements(n);case 8:t.settlementData=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("Failed to load pending settlements:",e.t0),t.showNotification("Kunne ikke laste utest√•ende utbetalinger","error");case 15:return e.prev=15,t.isLoading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,11,15,18]])})))()},formatDate:function(t){return t?new Date(t).toLocaleDateString("nb-NO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatAmount:function(t){if(!t)return"0,00 kr";var e=t/100;return new Intl.NumberFormat("nb-NO",{style:"currency",currency:"NOK"}).format(e)},showNotification:function(t,e){alert(t)}}},c=(n(761),n(78)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("AdminPage",[e("div",{staticClass:"pending-settlements"},[e("div",{staticClass:"page-header"},[e("h1",[t._v("Utest√•ende utbetalinger")]),t._v(" "),e("p",{staticClass:"page-description"},[t._v("Oversikt over bestillinger som ikke er inkludert i utbetalinger enn√•")])]),t._v(" "),e("div",{staticClass:"filters-section"},[e("div",{staticClass:"filter-group"},[e("label",{attrs:{for:"store-select"}},[t._v("Velg butikk:")]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedStoreId,expression:"selectedStoreId"}],attrs:{id:"store-select"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedStoreId=e.target.multiple?n:n[0]},t.loadData]}},[e("option",{attrs:{value:""}},[t._v("Velg butikk")]),t._v(" "),t._l(t.availableStores,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v("\n              "+t._s(n.name)+" ("+t._s(n.id)+")\n            ")])}))],2)])]),t._v(" "),e("div",{staticClass:"date-filters"},[e("div",{staticClass:"date-input"},[e("label",{attrs:{for:"from-date"}},[t._v("Fra dato:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateRange.from,expression:"dateRange.from"}],attrs:{id:"from-date",type:"date"},domProps:{value:t.dateRange.from},on:{change:t.loadData,input:function(e){e.target.composing||t.$set(t.dateRange,"from",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"date-input"},[e("label",{attrs:{for:"to-date"}},[t._v("Til dato:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateRange.to,expression:"dateRange.to"}],attrs:{id:"to-date",type:"date"},domProps:{value:t.dateRange.to},on:{change:t.loadData,input:function(e){e.target.composing||t.$set(t.dateRange,"to",e.target.value)}}})])])]),t._v(" "),t.isLoading&&t.selectedStoreId?e("div",{staticClass:"loading-section"},[e("Loading",{attrs:{loading:!0}})],1):t._e(),t._v(" "),t.settlementData&&t.selectedStoreId&&!t.isLoading?e("div",{staticClass:"summary-section"},[e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"summary-card"},[e("h3",[t._v("Totalt bestillinger")]),t._v(" "),e("div",{staticClass:"stat-value"},[t._v("\n            "+t._s(t.settlementData.totalDinteroOrders)+"\n          ")]),t._v(" "),e("div",{staticClass:"stat-amount"},[t._v("\n            "+t._s(t.formatAmount(t.settlementData.totalDinteroAmount))+"\n          ")])]),t._v(" "),e("div",{staticClass:"summary-card settled"},[e("h3",[t._v("Utbetalt")]),t._v(" "),e("div",{staticClass:"stat-value"},[t._v("\n            "+t._s(t.settlementData.totalSettledOrders)+"\n          ")]),t._v(" "),e("div",{staticClass:"stat-amount"},[t._v("\n            "+t._s(t.formatAmount(t.settlementData.totalSettledAmount))+"\n          ")])]),t._v(" "),e("div",{staticClass:"summary-card pending"},[e("h3",[t._v("Utest√•ende")]),t._v(" "),e("div",{staticClass:"stat-value"},[t._v("\n            "+t._s(t.settlementData.totalPendingOrders)+"\n          ")]),t._v(" "),e("div",{staticClass:"stat-amount"},[t._v("\n            "+t._s(t.formatAmount(t.settlementData.totalPendingAmount))+"\n          ")])])])]):t._e(),t._v(" "),t.settlementData&&t.settlementData.pendingOrders&&t.settlementData.pendingOrders.length>0&&!t.isLoading?e("div",{staticClass:"pending-orders-section"},[e("h2",[t._v("Utest√•ende ordrer ("+t._s(t.settlementData.totalPendingOrders)+")")]),t._v(" "),e("div",{staticClass:"table-container"},[e("table",{staticClass:"orders-table"},[e("thead",[e("tr",[e("th",[t._v("Ordre ID")]),t._v(" "),e("th",[t._v("Dato")]),t._v(" "),e("th",[t._v("Bel√∏p")]),t._v(" "),e("th",[t._v("Betaling")]),t._v(" "),e("th",[t._v("Levering")]),t._v(" "),e("th",[t._v("Kunde")]),t._v(" "),e("th",[t._v("Telefon")])])]),t._v(" "),e("tbody",t._l(t.settlementData.pendingOrders,(function(n){return e("tr",{key:n.orderId,staticClass:"order-row"},[e("td",{staticClass:"order-id"},[t._v("\n                "+t._s(n.friendlyOrderId)+"\n              ")]),t._v(" "),e("td",[t._v(t._s(t.formatDate(n.completed)))]),t._v(" "),e("td",{staticClass:"amount"},[t._v("\n                "+t._s(n.finalAmountFormatted)+"\n              ")]),t._v(" "),e("td",[t._v(t._s(n.paymentTypeLabel))]),t._v(" "),e("td",[t._v(t._s(n.deliveryTypeLabel))]),t._v(" "),e("td",[t._v(t._s(n.customerName||"-"))]),t._v(" "),e("td",[t._v(t._s(n.customerPhone))])])})),0)])])]):t._e(),t._v(" "),t.settlementData&&t.settlementData.settlements&&t.settlementData.settlements.length>0&&!t.isLoading?e("div",{staticClass:"settlements-section"},[e("h2",[t._v("Utbetalinger i perioden ("+t._s(t.settlementData.settlements.length)+")")]),t._v(" "),e("div",{staticClass:"settlements-grid"},t._l(t.settlementData.settlements,(function(n){return e("div",{key:n.settlementId,staticClass:"settlement-card"},[e("div",{staticClass:"settlement-header"},[e("h3",[t._v("Utbetaling")]),t._v(" "),e("div",{staticClass:"settlement-date"},[t._v("\n              "+t._s(t.formatDate(n.settledAt))+"\n            ")])]),t._v(" "),e("div",{staticClass:"settlement-details"},[e("div",{staticClass:"settlement-amount"},[t._v("\n              "+t._s(n.totalAmountFormatted)+"\n            ")]),t._v(" "),e("div",{staticClass:"settlement-count"},[t._v(t._s(n.transactionCount)+" transaksjoner")]),t._v(" "),e("div",{staticClass:"settlement-period"},[t._v(t._s(t.formatDate(n.startAt))+" - "+t._s(t.formatDate(n.endAt)))])])])})),0)]):t._e(),t._v(" "),t.isLoading||!t.selectedStoreId||t.settlementData&&0!==t.settlementData.totalDinteroOrders?t._e():e("div",{staticClass:"empty-state"},[e("div",{staticClass:"empty-icon"},[t._v("üìä")]),t._v(" "),e("h3",[t._v("Ingen bestillinger funnet")]),t._v(" "),e("p",[t._v("Det er ingen bestillinger i den valgte perioden for denne butikken.")])]),t._v(" "),t.isLoading||t.selectedStoreId?t._e():e("div",{staticClass:"empty-state"},[e("h3",[t._v("Velg en butikk")]),t._v(" "),e("p",[t._v("Velg en butikk og datoperiode for √• se utest√•ende utbetalinger.")])])])])}),[],!1,null,"82964fec",null);e.default=component.exports}}]);